<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Organizing programs and dataOverview Handling of empty vectors in function cin in function lvalue error side effects when use exception header files don’t use using  Handling of empty vectors in funct">
<meta property="og:type" content="article">
<meta property="og:title" content="Accelerated_Cpp_chapter04 Organizing programs and data">
<meta property="og:url" content="http://example.com/2022/10/18/Cpp/Accelerated-Cpp/Accelerated-Cpp-chapter04/index.html">
<meta property="og:site_name" content="krmmzs">
<meta property="og:description" content="Organizing programs and dataOverview Handling of empty vectors in function cin in function lvalue error side effects when use exception header files don’t use using  Handling of empty vectors in funct">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-10-18T03:03:39.000Z">
<meta property="article:modified_time" content="2022-10-20T12:58:52.969Z">
<meta property="article:author" content="krmmzs">
<meta property="article:tag" content="Cpp">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/2022/10/18/Cpp/Accelerated-Cpp/Accelerated-Cpp-chapter04/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Accelerated_Cpp_chapter04 Organizing programs and data | krmmzs</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">krmmzs</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/18/Cpp/Accelerated-Cpp/Accelerated-Cpp-chapter04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Accelerated_Cpp_chapter04 Organizing programs and data
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-10-18 11:03:39" itemprop="dateCreated datePublished" datetime="2022-10-18T11:03:39+08:00">2022-10-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-10-20 20:58:52" itemprop="dateModified" datetime="2022-10-20T20:58:52+08:00">2022-10-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Cpp/" itemprop="url" rel="index"><span itemprop="name">Cpp</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Cpp/Accelerated-Cpp/" itemprop="url" rel="index"><span itemprop="name">Accelerated Cpp</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Organizing-programs-and-data"><a href="#Organizing-programs-and-data" class="headerlink" title="Organizing programs and data"></a>Organizing programs and data</h1><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><ul>
<li><a href="#handling-of-empty-vectors-in-function">Handling of empty vectors in function</a></li>
<li><a href="#cin-in-function">cin in function</a></li>
<li><a href="#lvalue-error">lvalue error</a></li>
<li><a href="#side-effects-when-use-exception">side effects when use exception</a></li>
<li><a href="#header-files-dont-use-using">header files don’t use using</a></li>
</ul>
<h2 id="Handling-of-empty-vectors-in-function"><a href="#Handling-of-empty-vectors-in-function" class="headerlink" title="Handling of empty vectors in function"></a>Handling of empty vectors in function</h2><p>The most significant change is what we do if the <code>vector</code> is empty. In §3.2.2&#x2F;46, we knew that we would have to complain to whoever was running our program, and we also knew who that person would be and what kind of complaint would make sense. In this revised version, on the other hand, we don’t know who is going to be using it, or for what purpose, so we need a more general way of complaining. That more general way is to <strong>throw</strong> an <em>exceptionif</em> the <code>vector</code> is empty</p>
<p>The third point is that we check whether <code>homework.size()</code> is zero, even though we know that <code>median</code> will do so for us. The reason is that if <code>median</code> discovers that we are asking for the <strong>median of an empty vector</strong> , it throws an exception that includes the message median of an empty vector . This message is not directly useful to someone who is computing student grades. Therefore, we throw our own exception, which we hope will give the user more of a clue as to what has gone wrong.</p>
<h2 id="cin-in-function"><a href="#cin-in-function" class="headerlink" title="cin in function"></a>cin in function</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">istream&amp; <span class="title">read_hw</span><span class="params">(istream&amp; in, vector&lt;<span class="type">double</span>&gt;&amp; hw)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">double</span> x;</span><br><span class="line">    <span class="keyword">while</span> (in &gt;&gt; x)</span><br><span class="line">        hw.<span class="built_in">push_back</span>(x);</span><br><span class="line">    <span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This strategy doesn’t quite work, for two reasons. The first reason is that we haven’t defined hw —our caller defined it for us. Because we didn’t define it, we don’t know what data might be there already. For all we know, our caller might be using our function to process homework for lots of students, in which case <code>hw</code> might contain the previous student’s grades. We can solve this problem by calling <code>hw.clear()</code> before we begin our work.</p>
<p>The second reason that our strategy fails is that we don’t quite know when to stop. We can keep reading grades until we can no longer do so, but at that point we have a problem. There are two reasons why we might no longer be able to read a grade: We might have reached end-of-file, or we might have encountered something that is not a grade.</p>
<p>get final code:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">istream&amp; <span class="title">read_hw</span><span class="params">(istream&amp; in, vector&lt;<span class="type">double</span>&gt;&amp; hw)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// get rid of previous contents</span></span><br><span class="line">    hw.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">if</span> (in) &#123;</span><br><span class="line">        <span class="type">double</span> x;</span><br><span class="line">        <span class="keyword">while</span> (in &gt;&gt; x)</span><br><span class="line">            hw.<span class="built_in">push_back</span>(x);</span><br><span class="line">        in.<span class="built_in">clear</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="lvalue-error"><a href="#lvalue-error" class="headerlink" title="lvalue error"></a>lvalue error</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">❯ g++ -std=c++<span class="number">17</span> lvalue_test.cpp -o lvalue_test</span><br><span class="line">lvalue_test.cpp: In function ‘<span class="type">int</span> <span class="built_in">main</span>()’:</span><br><span class="line">lvalue_test.cpp:<span class="number">50</span>:<span class="number">31</span>: error: cannot bind non-<span class="type">const</span> lvalue reference of type ‘std::vector&lt;<span class="type">double</span>&gt;&amp;’ to an rvalue of type ‘std::vector&lt;<span class="type">double</span>&gt;’</span><br><span class="line">   <span class="number">50</span> |     <span class="built_in">read_hw</span>(std::cin, <span class="built_in">emptyvec</span>());</span><br><span class="line">      |                       ~~~~~~~~^~</span><br><span class="line">lvalue_test.cpp:<span class="number">25</span>:<span class="number">47</span>: note:   initializing argument <span class="number">2</span> of ‘<span class="function">std::istream&amp; <span class="title">read_hw</span><span class="params">(std::istream&amp;, std::vector&lt;<span class="type">double</span>&gt;&amp;)</span>’</span></span><br><span class="line"><span class="function">   25 | istream&amp; <span class="title">read_hw</span><span class="params">(istream&amp; in, vector&lt;<span class="type">double</span>&gt;&amp; hw)</span> </span>&#123;</span><br><span class="line">      |                               ~~~~~~~~~~~~~~~~^~</span><br></pre></td></tr></table></figure>

<h2 id="side-effects-when-use-exception"><a href="#side-effects-when-use-exception" class="headerlink" title="side effects when use exception"></a>side effects when use exception</h2><p>A good rule of thumb is to avoid more than one side effect in a single statement. Throwing an exception is a side effect, so a statement that might throw an exception should not cause any other side effects, particularly including input and output.</p>
<h2 id="header-files-don’t-use-using"><a href="#header-files-don’t-use-using" class="headerlink" title="header files don’t use using"></a>header files don’t use using</h2><p>In general, header files should declare only the names that are necessary. By restricting the names contained in a header file, we can preserve maximum flexibility for our users. For example, we use the qualified name for <code>std::vector</code> because we have no way of knowing how the user of our <strong>median</strong> function wants to refer to <code>std::vector</code>. Users of our code might not want a using-declaration for vector. If we write one in our header, then all programs that <code>include</code> our header get a using <code>std::vector</code> declaration, regardless of whether they wanted it. Header files should use fully qualified names rather than **using-**declarations.</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Cpp/" rel="tag"># Cpp</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/10/18/Cpp/Accelerated-Cpp/Accelerated-Cpp-chapter03/" rel="prev" title="Accelerated_Cpp_chapter03 Working with batches of data">
      <i class="fa fa-chevron-left"></i> Accelerated_Cpp_chapter03 Working with batches of data
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/10/19/Mac/Install-Windows-on-a-Mac/" rel="next" title="Install_Windows_on_a_Mac">
      Install_Windows_on_a_Mac <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Organizing-programs-and-data"><span class="nav-number">1.</span> <span class="nav-text">Organizing programs and data</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Overview"><span class="nav-number">1.1.</span> <span class="nav-text">Overview</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Handling-of-empty-vectors-in-function"><span class="nav-number">1.2.</span> <span class="nav-text">Handling of empty vectors in function</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cin-in-function"><span class="nav-number">1.3.</span> <span class="nav-text">cin in function</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#lvalue-error"><span class="nav-number">1.4.</span> <span class="nav-text">lvalue error</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#side-effects-when-use-exception"><span class="nav-number">1.5.</span> <span class="nav-text">side effects when use exception</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#header-files-don%E2%80%99t-use-using"><span class="nav-number">1.6.</span> <span class="nav-text">header files don’t use using</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">krmmzs</p>
  <div class="site-description" itemprop="description">233</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">53</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/krmmzs" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;krmmzs" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:belliyan250@gmail.com" title="E-Mail → mailto:belliyan250@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.youtube.com/channel/UCh2c-Y0OmoDUfeZHomm_Llg" title="YouTube → https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCh2c-Y0OmoDUfeZHomm_Llg" rel="noopener" target="_blank"><i class="fab fa-youtube fa-fw"></i>YouTube</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://t.me/krmmzs" title="Telegram → https:&#x2F;&#x2F;t.me&#x2F;krmmzs" rel="noopener" target="_blank"><i class="fab fa-telegram fa-fw"></i>Telegram</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">krmmzs</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
