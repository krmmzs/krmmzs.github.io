<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="233">
<meta property="og:type" content="website">
<meta property="og:title" content="krmmzs">
<meta property="og:url" content="http://example.com/page/5/index.html">
<meta property="og:site_name" content="krmmzs">
<meta property="og:description" content="233">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="krmmzs">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>krmmzs</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">krmmzs</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/30/Leetcode/LeetCode-33-Search-in-Rotated-Sorted-Array/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/30/Leetcode/LeetCode-33-Search-in-Rotated-Sorted-Array/" class="post-title-link" itemprop="url">LeetCode 33. Search in Rotated Sorted Array</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-10-30 17:58:04 / Modified: 18:28:12" itemprop="dateCreated datePublished" datetime="2022-10-30T17:58:04+08:00">2022-10-30</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="leetcode-33.-search-in-rotated-sorted-array">LeetCode 33. Search in Rotated Sorted Array</h1>
<h2 id="main-idea">Main Idea</h2>
<p>这个翻转让我想到一本书里关于三次reverse就可以得到旋转的方式</p>
<p>虽然和这题没有关系</p>
<blockquote>
<p>You must write an algorithm with O(log n) runtime complexity.</p>
</blockquote>
<p>给的数组升序且unique</p>
<p>如果不旋转直接二分log对吧。</p>
<p>翻转后可以得到两个升序数组, 不那么容易二分了</p>
<p>先找未知的旋转点，以nums[0]为界限，就可以二分出该未知点（二分的本质）</p>
<p>然后判断target在哪个区间，再二分</p>
<p>就可以判断出target是否存在</p>
<pre>

^    /
|   /
|  /
| /
|-------------------
|          /
|         /
|        /
|       /
|      /
|---------------------->
</pre>
<h2 id="code">Code</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">search</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums.<span class="built_in">empty</span>()) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">typedef</span> vector&lt;<span class="type">int</span>&gt;::size_type <span class="type">size_t</span>;</span><br><span class="line">        <span class="type">size_t</span> l = <span class="number">0</span>, r = nums.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">            <span class="type">size_t</span> mid = l + r + <span class="number">1</span> &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[mid] &gt;= nums[<span class="number">0</span>]) &#123;</span><br><span class="line">                l = mid;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                r = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (target &gt;= nums[<span class="number">0</span>]) &#123;</span><br><span class="line">            l = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            l = r + <span class="number">1</span>, r = nums.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">            <span class="type">size_t</span> mid = l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[mid] &gt;= target) &#123;</span><br><span class="line">                r = mid;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                l = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (nums[r] == target) &#123;</span><br><span class="line">            <span class="keyword">return</span> r;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/30/Leetcode/LeetCode-31-Next-Permutation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/30/Leetcode/LeetCode-31-Next-Permutation/" class="post-title-link" itemprop="url">LeetCode 31. Next Permutation</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-10-30 17:10:45 / Modified: 17:49:34" itemprop="dateCreated datePublished" datetime="2022-10-30T17:10:45+08:00">2022-10-30</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="leetcode-31.-next-permutation">LeetCode 31. Next Permutation</h1>
<h2 id="main-idea">Main Idea</h2>
<p>这个感觉在大二上看离散数学黑书里研究过，建议直接翻书</p>
<p>一个数想变大，肯定是后面开始变大，</p>
<p>很直觉地就抽象成点图</p>
<p>然后看升序降序</p>
<p>下一个排列就是从右往左找到第一个升序的位置，然后从这个位置往右找到第一个比他大的数，然后交换，然后把这个位置往右的数从小到大排序</p>
<p>Ex: 2 3 5 4 1</p>
<pre>
^
|
|   .            
|    .
|  .
| .   .  
|
|-------------------->
</pre>
<p>交换了 3 和 4</p>
<p>然后把 4 之后的数从小到大排序， 翻转即可</p>
<h2 id="code">Code</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">nextPermutation</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt;::size_type k = nums.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (k != <span class="number">0</span> &amp;&amp; nums[k - <span class="number">1</span>] &gt;= nums[k]) &#123;</span><br><span class="line">            k --;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (k == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">reverse</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            vector&lt;<span class="type">int</span>&gt;::size_type t = k;</span><br><span class="line">            <span class="keyword">while</span> (t &lt; nums.<span class="built_in">size</span>() &amp;&amp; nums[t] &gt; nums[k - <span class="number">1</span>]) &#123;</span><br><span class="line">                t ++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">swap</span>(nums[t - <span class="number">1</span>], nums[k - <span class="number">1</span>]);</span><br><span class="line">            <span class="built_in">reverse</span>(nums.<span class="built_in">begin</span>() + k, nums.<span class="built_in">end</span>());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/30/Leetcode/LeetCode-29-Divide-Two-Integers/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/30/Leetcode/LeetCode-29-Divide-Two-Integers/" class="post-title-link" itemprop="url">LeetCode 29. Divide Two Integers</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-10-30 16:41:33 / Modified: 17:13:02" itemprop="dateCreated datePublished" datetime="2022-10-30T16:41:33+08:00">2022-10-30</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="leetcode-29.-divide-two-integers">LeetCode 29. Divide Two Integers</h1>
<p>传送门： <a target="_blank" rel="noopener" href="https://leetcode.com/problems/divide-two-integers/">https://leetcode.com/problems/divide-two-integers/</a></p>
<h2 id="main-idea">Main Idea</h2>
<blockquote>
<p>Given two integers dividend and divisor, divide two integers without using multiplication, division, and mod operator.</p>
</blockquote>
<p>不能用常规的乘除法和取余法</p>
<p>那么本质上乘除法是+-的过程 然后也可以用位运算来实现乘除法</p>
<p>所以思考的时候仍然用乘除的抽象</p>
<p>暴力的话，考虑没有符号的时候（符号可以和数值单独处理）</p>
<p>7 / 2 = 3 也就是 减去k个2，直到不能减为止</p>
<p>不过极端情况下，比如 2^31 / 1 = 2^31，这样的话就会超时</p>
<p>所以需要优化</p>
<p>如果对快速幂的推导比较熟悉的话，应该能很快反应出来可以用二进制的思想log掉k</p>
<p>预处理logk位的2^k，然后从高位开始减去，直到不能减为止</p>
<p>假设 x / y = k ==&gt; (110010)_2 = 2^1 + 2^4 + 2^5</p>
<p>那么就可以这样做：</p>
<p>x - 2^1y - 2^4y - 2^5y</p>
<p>那么就可以先预处理2^0y, 2^1y ... 2^ky, (2^ky &lt;= x &lt; 2^k+1y), 直接处理32位也无所谓了</p>
<p>然后从<strong>高位</strong>开始减去，直到不能减为止</p>
<p>if x &gt;= 2^32y &lt;==&gt; x/y &gt;= 2^32, 那么二进制表示下，32处就是1</p>
<p>符号处理就看两者的符号是否相同</p>
<p>可以用异或来判断</p>
<h2 id="time-complexity">Time Complexity</h2>
<p>时间复杂度：O(logn)</p>
<h2 id="code">Code</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">divide</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"></span><br><span class="line">        <span class="type">bool</span> is_minus = (x &gt; <span class="number">0</span>) ^ (y &gt; <span class="number">0</span>);</span><br><span class="line">        LL a = <span class="built_in">labs</span>(x), b = <span class="built_in">labs</span>(y);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// pre-process logk bits of 2^k</span></span><br><span class="line">        vector&lt;LL&gt; exp;</span><br><span class="line">        <span class="keyword">for</span> (LL i = b; i &lt;= a; i = i + i) &#123;</span><br><span class="line">            exp.<span class="built_in">emplace_back</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        LL res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = exp.<span class="built_in">size</span>() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i --) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a &gt;= exp[i]) &#123;</span><br><span class="line">                a -= exp[i];</span><br><span class="line">                res += <span class="number">1ll</span> &lt;&lt; i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (is_minus) res = -res;</span><br><span class="line">        <span class="keyword">if</span> (res &gt; INT_MAX || res &lt; INT_MIN) res = INT_MAX;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/30/File-In-File-Out/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/30/File-In-File-Out/" class="post-title-link" itemprop="url">File In, File Out</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-10-30 13:43:50 / Modified: 14:15:03" itemprop="dateCreated datePublished" datetime="2022-10-30T13:43:50+08:00">2022-10-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Shell/" itemprop="url" rel="index"><span itemprop="name">Shell</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Shell/Linux-Shell-scripts-cookbook/" itemprop="url" rel="index"><span itemprop="name">Linux Shell scripts cookbook</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="file-in-file-out">File In, File Out</h1>
<h2 id="overview">Overview</h2>
<h2 id="fast-command-line-navigation-using-pushdand-popd">Fast command-line navigation using pushdand popd</h2>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/30/datalab/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/30/datalab/" class="post-title-link" itemprop="url">datalab</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-10-30 13:35:47" itemprop="dateCreated datePublished" datetime="2022-10-30T13:35:47+08:00">2022-10-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-14 00:31:18" itemprop="dateModified" datetime="2022-11-14T00:31:18+08:00">2022-11-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/csapp/" itemprop="url" rel="index"><span itemprop="name">csapp</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/csapp/lab/" itemprop="url" rel="index"><span itemprop="name">lab</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="datalab">datalab</h1>
<h2 id="prerequisites">Prerequisites</h2>
<p><a target="_blank" rel="noopener" href="http://csapp.cs.cmu.edu/3e/labs.html">lab code</a></p>
<p>我使用的ubuntu</p>
<p>第一次执行make会报错，需要装一些库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install gcc-multilib</span><br></pre></td></tr></table></figure>
<h3 id="test">Test</h3>
<p>测试函数 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./btest</span><br></pre></td></tr></table></figure></p>
<p>检查代码规范 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./dlc bits.c</span><br></pre></td></tr></table></figure></p>
<p>这时候再make只有文件本身的errors and warnings</p>
<h2 id="main">Main</h2>
<p>主要文件是<code>datalab-handout/bits.c</code>，里面有一些函数的实现，需要自己实现。</p>
<p>一共需要完成13个函数，每个函数都是一个题目</p>
<h2 id="solutions">Solutions</h2>
<h3 id="bitxor">bitXor</h3>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1</span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * bitXor - x^y using only ~ and &amp; </span></span><br><span class="line"><span class="comment"> *   Example: bitXor(4, 5) = 1</span></span><br><span class="line"><span class="comment"> *   Legal ops: ~ &amp;</span></span><br><span class="line"><span class="comment"> *   Max ops: 14</span></span><br><span class="line"><span class="comment"> *   Rating: 1</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<p>感觉是比较巧妙的题目，尝试在脑中dfs 先列出异或真值表</p>
<table>
<thead>
<tr class="header">
<th>x</th>
<th>y</th>
<th>x^y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>其中为了和&amp;产生联系, 取出结果为1的两行，让0取反 &amp; 1同样得到1</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~x &amp; y, x &amp; ~y</span><br></pre></td></tr></table></figure>
<p>两者取|即可得到结果，|的意思是两种情况满足其一即可</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~x &amp; y | x &amp; ~y</span><br></pre></td></tr></table></figure>
<p>但是本题是不能使用|的, 用De Morgan's Law进行转化即可</p>
<p><img src="/images/csapp-datalab-01.png" alt="csapp-datalab-01.png" style="zoom:70%;" /></p>
<p><img src="/images/csapp-datalab-02.png" alt="csapp-datalab-02.png" style="zoom:70%;" /></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">bitXor</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ~(x &amp; y) &amp; (~(~x &amp; ~y));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="tmin">tmin</h3>
<blockquote>
<p>return minimum two's complement integer</p>
</blockquote>
<p>最高位为1，其余位为0</p>
<p>直接返回0x80000000是违反最大只能使用255的规定的</p>
<blockquote>
<p>Integer constants 0 through 255 (0xFF), inclusive. You are not allowed to use big constants such as 0xffffffff.</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">tmin</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> &lt;&lt; <span class="number">31</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="istmax">isTmax</h3>
<blockquote>
<p>returns 1 if x is the maximum, two's complement number,</p>
</blockquote>
<p>当最高位为0, 其余位为1时，即为最大值</p>
<p>本质就是来判断x的二进制表示是否为期望的二进制表示</p>
<p>等价变化的game</p>
<blockquote>
<p>Legal ops: ! ~ &amp; ^ | +</p>
</blockquote>
<p>不能使用位移。。。</p>
<p>尝试做一些等价变化的dfs</p>
<p>让Tmax + 1, 得到最高位为1, 其余为0的数</p>
<p>两者取反即可判断是否相等了, 对应的操作就是两者按位异或即可: (x + 1) ^ (~x)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">isTmax</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> !((x + <span class="number">1</span>) ^ (~x));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是报错了 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Score	Rating	Errors	Function</span><br><span class="line">ERROR: Test isTmax(-1[0xffffffff]) failed...</span><br><span class="line">...Gives 1[0x1]. Should be 0[0x0]</span><br><span class="line">Total points: 0/1</span><br></pre></td></tr></table></figure></p>
<p>没有考虑到-1的情况</p>
<p><span class="math inline">\(!!\)</span> 这里是一个规格化的操作</p>
<p>因为!会让非0的数的二进制表示为000000, 再!就会变成000001</p>
<p>而0的二进制表示为000000, 再!就会变成000001, 再!就会变成000000</p>
<p>这个书上并没有说，而且也没有看到有人详细讲了这个。。。</p>
<p>补上即可</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">isTmax</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="type">int</span> tmin = x + <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> equal = tmin ^ (~x);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (!!tmin) &amp; (!equal);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第二种解法是利用，自己与自己异或可以得到0的性质 同样需要考虑-1的情况</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">isTmax</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> !(~(x + <span class="number">1</span>) ^ x) &amp; !!(x + <span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<h3 id="alloddbits">allOddBits</h3>
<blockquote>
<p>return 1 if all odd-numbered bits in word set to 1</p>
</blockquote>
<p>所有奇数位为1就返回1, 那么偶数位就可以变化，来构造出对判断有帮助的数</p>
<p>可以设置为全0</p>
<p>缩小规模为4位</p>
<p>&amp;拥有一种遮盖性(mask)，当一个为0就可以把另一个遮盖掉</p>
<p>1010为mask序列, 让1010与num进行&amp;操作，即可得到num的奇数位就可以达到遮蔽偶数位的效果</p>
<p>所以回到之前，让x与mask序列进行&amp;操作，即可得到形如x0x0x0...的序列</p>
<p>异或的其中一个作用就是判不同, 让x0x0x0...与101010...异或，如果为0，说明所有奇数位都为1，否则就不是</p>
<p>那么问题就变成了，如何构造出mask序列</p>
<p>其中一种方法是让题目能够表示的最大的mask序列进行位移和|操作</p>
<p>0xAA = mask_8 = 10101010, 左移8位, 1010101000000000, 两者再|操作, 1010101010101010(mask_16)</p>
<p>mask_16 = 1010101010101010, 左移16位, 10101010101010100000000000000000, 两者再|操作, 10101010101010101010101010101010(mask_32)</p>
<p>构造成功</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">allOddBits</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="type">int</span> mask = <span class="number">0xAA</span>;</span><br><span class="line">    mask = (mask &lt;&lt; <span class="number">8</span>) | mask;</span><br><span class="line">    mask = (mask &lt;&lt; <span class="number">16</span>) | mask;</span><br><span class="line">    <span class="keyword">return</span> !((mask &amp; x) ^ mask);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="negative">negative</h3>
<blockquote>
<p>return -x</p>
</blockquote>
<p>非常常用的一个操作</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">negative</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ~x + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>原因： x与自己取反以后相加是全1，再加1就是全0</p>
<p>也就是 x + ~x + 1 = 0，得出-x = ~x + 1</p>
<h3 id="isasciidigit">isAsciiDigit</h3>
<blockquote>
<p>return 1 if 0x30 &lt;= x &lt;= 0x39 (ASCII codes for characters '0' to '9')</p>
</blockquote>
<p>0x30 = 00110000, 0x39 = 00111001</p>
<p>不等式比大小常用的方法是做差</p>
<p>做差不能直接使用可以用-x = ~x + 1来等价代换</p>
<p>sign_1 = x - 0x30 -&gt; sign_1 = x + ~0x30 + 1 sign_2 = 0x39 - x -&gt; sign_2 = 0x39 + ~x + 1</p>
<p>再根据最高位的符号位来判断正负</p>
<p>!(sign_1 &gt;&gt; 31) &amp; !(sign_2 &gt;&gt; 31)</p>
<h3 id="conditional">conditional</h3>
<blockquote>
<p>same as x ? y : z</p>
</blockquote>
<p>用位运算来实现c中的三目运算符</p>
<p>第一个需要解决的是如何判断x</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x != <span class="number">0</span>, y</span><br><span class="line">x == <span class="number">0</span>, z</span><br></pre></td></tr></table></figure>
<p>判断0可以用!!来替换, if x != 0, !!x == 1, if x == 0, !!x == 0(这在前面其实用到了)</p>
<p>用一个变量来存: condition = !!x</p>
<p>如何需要思考如何返回y或者z， 两者是互斥的</p>
<p>|运算能尽可能得实现互斥(当其中一个为全0的时候)</p>
<p>y | z</p>
<p>所以需要一个因子能在两种不同的情况下让其中一个为0</p>
<p>容易想到的是全0和全1</p>
<p>用condition来构造全0和全1</p>
<p>flag = ~condition + 1, 即可得到全0和全1</p>
<p>flag 和 ~flag 就实现了互斥对</p>
<p>最终得到 flag &amp; y | ~flag &amp; z</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">conditional</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> z)</span> &#123;</span><br><span class="line">    <span class="type">int</span> condition = !!x;</span><br><span class="line">    <span class="type">int</span> flag = ~condition + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> (flag &amp; y) | (~flag &amp; z);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="islessorequal">isLessOrEqual</h3>
<blockquote>
<p>if x &lt;= y then return 1, else return 0</p>
</blockquote>
<p>比大小做差</p>
<p>y - x &gt;= 0 -&gt; y + ~x + 1 &gt;= 0</p>
<p>sign = (y + ~x + 1) &gt;&gt; 31</p>
<p>if (sign &gt;&gt; 31) == 0 y - x &gt;= 0, return 1</p>
<p>if (sign &gt;&gt; 31) == -1 y - x &lt; 0, return 0</p>
<p>return !(sign &gt;&gt; 31)</p>
<p>但是 y - x 可能会溢出</p>
<ol type="1">
<li><p>y &lt; 0, x &gt; 0, y - x &lt; 0, 但是如果溢出就会变成正数，所以需要特殊判断y &lt; 0 &amp;&amp; x &gt; 0</p></li>
<li><p>y &gt; 0, x &lt; 0, y - x &gt; 0, 但是如果溢出就会变成负数，所以需要特殊判断y &gt; 0 &amp;&amp; x &lt; 0</p></li>
<li><p>x &gt; 0 =&gt; s_x = x &gt;&gt; 31, s_x == 0, y &lt; 0 =&gt; s_y = y &gt;&gt; 31, s_y == -1, 可得 of_1 = (!s_x) &amp; s_y</p></li>
</ol>
<p>所以需要满足 !(sign&gt;&gt;31) 但是不满足 of_1, 得到 return (!of_1) &amp; (!(sign&gt;&gt;31))</p>
<ol start="2" type="1">
<li>x &lt; 0 =&gt; s_x = x &gt;&gt; 31, s_x == -1, y &gt; 0 =&gt; s_y = y &gt;&gt; 31, s_y == 0, 可得 of_2 = s_x &amp; (!s_y)</li>
</ol>
<p>这里直接就return 1, 所以只要满足x &lt; 0, y &gt; 0就可以了</p>
<p>return of_2</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> of_2 | (!(of_1)) &amp; (!(sign&gt;&gt;<span class="number">31</span>));</span><br></pre></td></tr></table></figure>
<h3 id="logicalneg">logicalNeg</h3>
<blockquote>
<p>implement the ! operator, using all of the legal operators except !</p>
</blockquote>
<p>也就是实现只有当x == 0的时候，!x才为1</p>
<p>用-x可以得到x的相反数，仍然为0</p>
<p>也就是0很特殊，相反数以后，最高位都是0</p>
<p>(x | negate_x) &gt;&gt; 31 = 0</p>
<p>还需要思考不等于0的情况</p>
<p>如果不等于0， 相反数其中最高位其中一个为1， (x | negate_x) &gt;&gt; 31 = -1</p>
<p>将条件摆在一起 - if x == 0 return 1 (x | negate_x) &gt;&gt; 31 == 0 - if x != 0 return 0 (x | negate_x) &gt;&gt; 31 == -1</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> ((x | ~x + <span class="number">1</span>) &gt;&gt; <span class="number">31</span>) + <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h3 id="howmanybits">howManyBits</h3>
<blockquote>
<p>return the minimum number of bits required to represent x in two's complement</p>
</blockquote>
<p>最直观的方法从找到高位的1， 然后加上一个符号位</p>
<p>查找的问题，概率论加持的最快方法是二分查找</p>
<p>分割区间的性质是是否含有1</p>
<p>没有1就是全0, 判断全0可以用!!</p>
<p>flag = !!(x &gt;&gt; 16), if flag = 1, bit_num &gt; 16, if flag = 0, bit_num &lt; 16</p>
<p>为了能够搜索其中一个区间，我们需要一个位移操作</p>
<p>x = x &gt;&gt; cnt_16</p>
<p>构造cnt_16 = flag &lt;&lt; 4, if falg = 1, cnt_16 = 16, if flag = 0, cnt_16 = 0</p>
<p>接下来8, 4, 2, 1同理</p>
<p>最后求和所有的标记加上符号位即可，但是这样的方法并不能满足负数的情况</p>
<p>看几个例子：</p>
<p>2 bit: -2 ~ 1 3 bit: -4 ~ 3 32 bit: -2147483648(2^31) ~ 2147483647(2^31 - 1)</p>
<p>那么可以把负数转化为正数处理，因为不是对称的，所以进行-1即可</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">howManyBits</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="type">int</span> flag = x &gt;&gt; <span class="number">31</span>;</span><br><span class="line">    <span class="type">int</span> cnt_16, cnt_8, cnt_4, cnt_2, cnt_1, cnt_0;</span><br><span class="line">    <span class="type">int</span> sign = x &gt;&gt; <span class="number">31</span>;</span><br><span class="line">    x = (sign &amp; (~x)) | (~sign &amp; x); <span class="comment">// 根据符号位来判断x的正负，从而决定是否取反(不具有普遍性)</span></span><br><span class="line">    flag = !!(x &gt;&gt; <span class="number">16</span>);</span><br><span class="line">    cnt_16 = flag &lt;&lt; <span class="number">4</span>;</span><br><span class="line">    x = x &gt;&gt; cnt_16;</span><br><span class="line"></span><br><span class="line">    flag = !!(x &gt;&gt; <span class="number">8</span>);</span><br><span class="line">    cnt_8 = flag &lt;&lt; <span class="number">3</span>;</span><br><span class="line">    x = x &gt;&gt; cnt_8;</span><br><span class="line"></span><br><span class="line">    flag = !!(x &gt;&gt; <span class="number">4</span>);</span><br><span class="line">    cnt_4 = flag &lt;&lt; <span class="number">2</span>;</span><br><span class="line">    x = x &gt;&gt; cnt_4;</span><br><span class="line"></span><br><span class="line">    flag = !!(x &gt;&gt; <span class="number">2</span>);</span><br><span class="line">    cnt_2 = flag &lt;&lt; <span class="number">1</span>;</span><br><span class="line">    x = x &gt;&gt; cnt_2;</span><br><span class="line"></span><br><span class="line">    flag = !!(x &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    cnt_1 = flag;</span><br><span class="line">    x = x &gt;&gt; cnt_1;</span><br><span class="line"></span><br><span class="line">    cnt_0 = x;</span><br><span class="line">    <span class="keyword">return</span> cnt_16 + cnt_8 + cnt_4 + cnt_2 + cnt_1 + cnt_0 + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr />
<p>接下來是float的主场了</p>
<p>float限制非常少</p>
<blockquote>
<p>For the problems that require you to implement floating-point operations, the coding rules are less strict. You are allowed to use looping and conditional control. You are allowed to use both ints and unsigneds. You can use arbitrary integer and unsigned constants. You can use any arithmetic, logical, or comparison operations on int or unsigned data.</p>
</blockquote>
<hr />
<h3 id="floatscale2">floatScale2</h3>
<blockquote>
<p>Return bit-level equivalent of expression 2*f for floating point arguments f.</p>
</blockquote>
<p>这里操作是做浮点数，但是传入和传出都是<code>unsigned int</code></p>
<p><code>unsigned int</code> ?-&gt; <code>float</code></p>
<p>两者都是32位的，所以要分别获取 <code>unsigned int</code> 1位的<code>s</code>, 8位的<code>exp</code>, 23位的<code>frac</code></p>
<p>最高位好获得，直接uf &amp; 0x80000000</p>
<p>exp = (0x7F800000 &amp; uf) &gt;&gt; 23, frac = uf &amp; 0x7FFFFF</p>
<p>接下里处理浮点数，浮点数有四种规则，需要根据<code>exp</code>进行分类讨论</p>
<ul>
<li>if (exp == 0xFF) &amp;&amp; (frac != 0) =&gt; NaN</li>
</ul>
<p>按照规则返回 uf.</p>
<ul>
<li>if (exp == 0xFF) &amp;&amp; (frac == 0)</li>
</ul>
<p>按照规则返回 uf.</p>
<ul>
<li><p>if (exp == 0) &amp;&amp; (frac == 0) return uf</p></li>
<li><p>if (exp == 0) &amp;&amp; (frac != 0) For frac * 2, frac &lt;&lt; 1 return s | (exp &lt;&lt; 23) | (frac &lt;&lt; 1)</p></li>
<li><p>if (exp != 0) &amp;&amp; (exp != 255), return s | ((exp + 1) &lt;&lt; 23) | frac</p></li>
</ul>
<p>这里因为要乘2所以让exp + 1, 但是这样会偏移导致当exp位254的时候产生exp+1=255, 表示为无穷</p>
<p>return s | (0xFF &lt;&lt; 23)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">unsigned</span> <span class="title function_">floatScale2</span><span class="params">(<span class="type">unsigned</span> uf)</span> &#123;</span><br><span class="line">    <span class="type">unsigned</span> s = uf &amp; <span class="number">0x80000000</span>;</span><br><span class="line">    <span class="type">unsigned</span> <span class="built_in">exp</span> = (uf &amp; <span class="number">0x7F800000</span>) &gt;&gt; <span class="number">23</span>;</span><br><span class="line">    <span class="type">unsigned</span> frac = uf &amp; <span class="number">0x007FFFFF</span>;</span><br><span class="line">    <span class="type">unsigned</span> ret = <span class="number">0</span>;</span><br><span class="line">    <span class="type">unsigned</span> inf = s | (<span class="number">0xFF</span> &lt;&lt; <span class="number">23</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">exp</span> == <span class="number">0xFF</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> uf;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">exp</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (frac == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> uf;</span><br><span class="line">        &#125;</span><br><span class="line">        frac = frac &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        ret = s | (<span class="built_in">exp</span> &lt;&lt; <span class="number">23</span>) | frac;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">exp</span> = <span class="built_in">exp</span> + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">exp</span> == <span class="number">0xFF</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> inf;</span><br><span class="line">    &#125;</span><br><span class="line">    ret = s | (<span class="built_in">exp</span> &lt;&lt; <span class="number">23</span>) | frac;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="floatfloat2int">floatFloat2Int</h3>
<p>把一个单精度浮点数强制转化成整形数</p>
<p>由于单精度浮点数的范围比int大得多, 且int的范围是-2^31 ~ 2^31 - 1, 所以需要进行分类讨论</p>
<p>if E &lt; 0, 此时浮点数本身表示的并不是整数, return 0;</p>
<p>V = (-1)^s * M * 2^E</p>
<ul>
<li>E = 31, s = 1, V = -2^31</li>
<li>E = 31, s = 0, V = 2^31 - 1</li>
</ul>
<p>可得到 if E &gt; 31 return 0x80000000</p>
<p>已经处理好了</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  -----            --------</span><br><span class="line">      |            |</span><br><span class="line">-----------------------------&gt;</span><br><span class="line">      <span class="number">0</span>            <span class="number">31</span></span><br></pre></td></tr></table></figure>
<p>现在处理E: 0～31</p>
<ul>
<li>s = uf &gt;&gt; 31</li>
<li>exp = (uf &amp; 0x7F800000) &gt;&gt; 23</li>
</ul>
<p>0 &lt;= E &lt;= 31 =&gt; 127 &lt;= exp &lt;= 158(E = exp - bias(127))</p>
<p>根据exp的范围可以得到是规格化的数, M = 1 + f</p>
<ul>
<li>frac(M) = (uf &amp; 0x7FFFFF) | 0x00800000 （这里比较巧妙）</li>
</ul>
<p>这里E可以理解为等一下要右移的位数等价于移动小数点，因为要转int,所以会截断</p>
<p>if 0 &lt;= E &lt;= 23, 需要截断, 直接右移23 - E位 &lt;=&gt; return frac &gt;&gt; (23 - E)</p>
<p>if 24 &lt;= E &lt;= 31, 不需要截断, 直接左移E - 23位 &lt;=&gt; return frac &lt;&lt; (E - 23)</p>
<p>最后确定一下符号位就好了</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">floatFloat2Int</span><span class="params">(<span class="type">unsigned</span> uf)</span> &#123;</span><br><span class="line">    <span class="type">int</span> sign = uf &gt;&gt; <span class="number">31</span>;</span><br><span class="line">    <span class="type">int</span> <span class="built_in">exp</span> = (uf &amp; <span class="number">0x7F800000</span>) &gt;&gt; <span class="number">23</span>;</span><br><span class="line">    <span class="type">int</span> frac = (uf &amp; <span class="number">0x007FFFFF</span>);</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> E = <span class="built_in">exp</span> - <span class="number">127</span>;</span><br><span class="line">    frac = frac | <span class="number">0x00800000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (E &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (E &gt; <span class="number">31</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0x80000000</span>u;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (E &gt; <span class="number">23</span>) &#123;</span><br><span class="line">        res = frac &lt;&lt; (E - <span class="number">23</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res = frac &gt;&gt; (<span class="number">23</span> - E);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (sign == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> ~res + <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="floatpower2">floatPower2</h3>
<blockquote>
<p>Return bit-level equivalent of the expression 2.0^x (2.0 raised to the power x) for any 32-bit integer x.</p>
</blockquote>
<blockquote>
<p>If the result is too small to be represented as a denorm, return If too large, return +INF.</p>
</blockquote>
<p>这里给了如果太大或者太小的返回值</p>
<p>来分析一下当x取什么值会导致y太大或者太小</p>
<p>在float那里，非规格化的数有两个用途，一个是表示0, 一个是表示非常接近0的数</p>
<p>当exp = 0000 0000, f = 000...01, 此时就是float最接近0的数字</p>
<p>代入 V = (-1)^s * M * 2^E, 可以得到V_min = 2^-149(E = 1 - bias = -126, M = f = 2^(23))</p>
<p>也就是当x &lt; -149的时候，y &lt; 2^-149, 此时y太小了, return 0</p>
<p>当exp = 1111 1111(此时是规格化的), f = 000...00， E = exp - bias = 127, M = 1 + f = 2^(23), 此时V_max = 2^127</p>
<p>也就是当x &gt; 127的时候，y &gt; 2^127, 此时y太大了, return +INF(由0xFF &lt;&lt; 23得到)</p>
<p>此时只剩下中间的区间了</p>
<p>其中，有些值很靠近0, 需要用非规格化的数来表示，其余的用规格化的数来表示</p>
<p>需要得到分界点t</p>
<p>这里感觉考察的是非规格和规格之间平滑过度的点</p>
<p>规格化最小值：当exp = 1, E = exp - bias = -126, V_min = 2^-126</p>
<p>非规格化最大值：当exp = 0, E = exp - bias = -127, V_max = 2^-149</p>
<p>让t为127</p>
<p>Normalized: -149 &lt;= x &lt;= -127, Denormalized: -126 &lt;= x &lt;= 127</p>
<p>此时来构造非规格化的数</p>
<p>exp = 0000 0000, frac = 0x1 &lt;&lt; (x + 149)</p>
<p>来构造规格化的数</p>
<p>if x == -126, E = -126, E = exp - 127, exp = 1 if x == -125, E = -125, E = exp - 127, exp = 2 ... if x == 127, E = 127, E = exp - 127, exp = 254</p>
<p>-126 &lt;= x &lt;= 127, exp = x + 127, return exp &lt;&lt; 23</p>
<p>```c unsigned floatPower2(int x) { int exp; unsigned res;</p>
<pre><code>if (x &lt; -149) &#123;
    return 0;
&#125;

if (x &gt; 127) &#123;
    return (0xFF &lt;&lt; 23);
&#125;

if (x &lt; -126) &#123;
    return 0x1 &lt;&lt; (x + 149);
&#125;

exp = x + 127;
res = exp &lt;&lt; 23;
return res;</code></pre>
<p>}```</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/29/Linux/CLI/zsh/Understanding-Zsh-Completions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/29/Linux/CLI/zsh/Understanding-Zsh-Completions/" class="post-title-link" itemprop="url">Understanding Zsh Completions</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-10-29 16:58:03" itemprop="dateCreated datePublished" datetime="2022-10-29T16:58:03+08:00">2022-10-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-10-31 13:57:16" itemprop="dateModified" datetime="2022-10-31T13:57:16+08:00">2022-10-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/CLI/" itemprop="url" rel="index"><span itemprop="name">CLI</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/CLI/zsh/" itemprop="url" rel="index"><span itemprop="name">zsh</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="understanding-zsh-completions">Understanding Zsh Completions</h1>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/29/Linux/CLI/fzf/fzf-advanced/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/29/Linux/CLI/fzf/fzf-advanced/" class="post-title-link" itemprop="url">fzf advanced</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-10-29 14:09:12 / Modified: 21:04:29" itemprop="dateCreated datePublished" datetime="2022-10-29T14:09:12+08:00">2022-10-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/CLI/" itemprop="url" rel="index"><span itemprop="name">CLI</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="fzf-advanced">fzf advanced</h1>
<p>Yes, I love fzf.</p>
<p>It make my life easier.</p>
<h2 id="whats-fzf">What's fzf?</h2>
<blockquote>
<p>fzf is a general-purpose command-line fuzzy finder. It's an interactive Unix filter for command-line that can be used with any list; files, command history, processes, hostnames, bookmarks, git commits, etc.</p>
</blockquote>
<p>fzf is an interactive Unix filter program that is designed to be used with other Unix tools. It reads a list of items from the standard input, allows you to select a subset of the items, and prints the selected ones to the standard output. You can think of it as an interactive version of grep, and it's already useful even if you don't know any of its options.</p>
<h2 id="pros">Pros</h2>
<ul>
<li>Portable, no dependencies</li>
<li>Blazingly fast</li>
<li>The most comprehensive feature set</li>
<li>Flexible layout</li>
<li>Batteries included
<ul>
<li>Vim/Neovim plugin, key bindings, and fuzzy auto-completion</li>
</ul></li>
</ul>
<h2 id="installation">Installation</h2>
<p><a target="_blank" rel="noopener" href="https://github.com/junegunn/fzf/tree/168829b5550336886a426073670153f84f8a34b2#installation">github Installation</a></p>
<p>Tips: if you are using Ubuntu, don't use apt to install fzf, it's too old.</p>
<h2 id="find-file">Find file</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># fzf find files</span><br><span class="line">alias v=&quot;fd --type f --hidden --exclude .git | fzf-tmux -p 70% --reverse | xargs nvim&quot;</span><br><span class="line"># fzf with cd</span><br><span class="line">export FZF_CTRL_T_COMMAND=&quot;find . -maxdepth 1 | sed &#x27;s/^..//&#x27;&quot;</span><br></pre></td></tr></table></figure>
<ul>
<li>v
<ul>
<li>--type f : only find files</li>
<li>--hidden : find hidden files</li>
<li>--exclude .git : exclude .git</li>
<li>fzf-tmux : Popup window support use fzf-tmux</li>
<li>-p 70% : preview 70% of the screen</li>
<li>--reverse : reverse the order</li>
<li>xargs nvim : open the file with nvim</li>
</ul></li>
</ul>
<p><img src="/images/fzf-01.png" alt="fzf-01.png" style="zoom:70%;" /> <img src="/images/fzf-02.png" alt="fzf-02.png" style="zoom:70%;" /></p>
<ul>
<li>FZF_CTRL_T_COMMAND
<ul>
<li>find . -maxdepth 1 : find files in current directory</li>
<li>sed 's/^..//' : remove the first two characters</li>
</ul></li>
</ul>
<p><img src="/images/fzf-03.png" alt="fzf-03.png" style="zoom:70%;" /></p>
<p>More see <a target="_blank" rel="noopener" href="https://github.com/krmmzs/.dotfiles/blob/master/zsh/.zshrc">dotfiles</a></p>
<h2 id="find-command-history">Find command history</h2>
<p><code>CTRL-R</code> - Paste the selected command from history onto the command-line</p>
<ul>
<li>If you want to see the commands in chronological order, press <code>CTRL-R</code> again which toggles sorting by relevance</li>
<li>Set <code>FZF_CTRL_R_OPTS</code> to pass additional options</li>
</ul>
<p><img src="/images/fzf-04.png" alt="fzf-04.png" style="zoom:70%;" /></p>
<h2 id="quick-cd">Quick cd</h2>
<p><code>ALT-C</code> - cd into the selected directory</p>
<ul>
<li>Set <code>FZF_ALT_C_COMMAND</code> to override the default command</li>
<li>Set <code>FZF_ALT_C_OPTS</code> to pass additional options</li>
</ul>
<p><img src="/images/fzf-06.png" alt="fzf-06.png" style="zoom:70%;" /> <img src="/images/fzf-07.png" alt="fzf-07.png" style="zoom:70%;" /></p>
<p>but if you want to preview the directory's content, more recommended to use <a target="_blank" rel="noopener" href="https://github.com/ranger/ranger">ranger</a></p>
<p>after install ranger, type <code>. ranger</code> to quick cd</p>
<p><img src="/images/fzf-08.png" alt="fzf-08.png" style="zoom:70%;" /></p>
<h2 id="as-the-secondary-filter">As the secondary filter</h2>
<h2 id="fuzzy-completion-for-bash-and-zsh">Fuzzy completion for bash and zsh</h2>
<p>Fuzzy completion for files and directories can be triggered if the word before the cursor ends with the trigger sequence, which is by default <code>**</code>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">COMMAND [DIRECTORY/][FUZZY_PATTERN]**&lt;TAB&gt;</span><br></pre></td></tr></table></figure>
<p>EX:</p>
<ul>
<li><p>You can select multiple items with TAB key nvim **<TAB></p></li>
<li><p>Directories under ~/github that match <code>fzf</code> cd ~/github/fzf**<TAB></p></li>
</ul>
<h3 id="process-ids">Process IDs</h3>
<p>Fuzzy completion for PIDs is provided for kill command.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Can select multiple processes with &lt;TAB&gt; or &lt;Shift-TAB&gt; keys</span></span><br><span class="line"><span class="built_in">kill</span> -9 **&lt;TAB&gt;</span><br></pre></td></tr></table></figure>
<h3 id="host-names">Host names</h3>
<p>For ssh and telnet commands, fuzzy completion for hostnames is provided. The names are extracted from /etc/hosts and ~/.ssh/config.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh **&lt;TAB&gt;</span><br><span class="line">telnet **&lt;TAB&gt;</span><br></pre></td></tr></table></figure>
<h3 id="environment-variables-aliases">Environment variables / Aliases</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> **&lt;TAB&gt; </span><br><span class="line"><span class="built_in">export</span> **&lt;TAB&gt; </span><br><span class="line"><span class="built_in">unalias</span> **&lt;TAB&gt;</span><br></pre></td></tr></table></figure>
<h2 id="fzf-replace-tab">fzf replace tab</h2>
<p>requirement: <a target="_blank" rel="noopener" href="https://github.com/Aloxaf/fzf-tab#configure">fzf-tab</a></p>
<p>演示：</p>
<figure>
<img src="/gif/fzf-01.gif" alt="" /><figcaption>fzf-01.gif</figcaption>
</figure>
<script id="asciicast-YlYXHGvQ786rS7kQy2u81aI9v" src="https://asciinema.org/a/YlYXHGvQ786rS7kQy2u81aI9v.js" async></script>
<h2 id="for-vimneovim">For vim(neovim)</h2>
<p>If you use vim only: <a target="_blank" rel="noopener" href="https://github.com/airblade/vim-rooter">airblade/vim-rooter</a></p>
<p>Rooter changes the working directory to the project root when you open a file or directory.</p>
<p>If you use neovim: <a target="_blank" rel="noopener" href="https://github.com/ahmedkhalf/project.nvim/tree/628de7e433dd503e782831fe150bb750e56e55d6">ahmedkhalf/project.nvim</a></p>
<p>project.nvim is an all in one neovim plugin written in lua that provides superior project management.</p>
<p>Then fzf will find files in the project root.</p>
<p>more see <a target="_blank" rel="noopener" href="https://github.com/junegunn/fzf/blob/master/README-VIM.md">FZF Vim integration</a></p>
<h3 id="fzf-in-vim">FzF in vim</h3>
<p>I already replaced fzf with <a target="_blank" rel="noopener" href="https://github.com/nvim-telescope/telescope.nvim">telescope</a>, but I still want to record it. If you use vim only, fzf.vim still a good choice.</p>
<p><a target="_blank" rel="noopener" href="https://github.com/junegunn/fzf.vim">fzf</a></p>
<p><img src="/images/fzf-05.png" alt="fzf-05.png" style="zoom:70%;" /></p>
<h2 id="reference">Reference</h2>
<p>Some reference that I may not have mentioned in the article, because I forgot where it came from, maybe is my idea.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Fzf">archlinux wiki</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/junegunn/fzf/blob/master/ADVANCED.md">fzf ADVANCED</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/junegunn/fzf#fuzzy-completion-for-bash-and-zsh">Fuzzy completion for bash and zsh</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/junegunn/fzf/blob/master/README-VIM.md">FZF Vim integration</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/27/Cpp/Accelerated-Cpp/Accelerated-Cpp-chapter08/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/27/Cpp/Accelerated-Cpp/Accelerated-Cpp-chapter08/" class="post-title-link" itemprop="url">Accelerated_Cpp_chapter08</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-10-27 20:59:54 / Modified: 21:00:34" itemprop="dateCreated datePublished" datetime="2022-10-27T20:59:54+08:00">2022-10-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Cpp/" itemprop="url" rel="index"><span itemprop="name">Cpp</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Cpp/Accelerated-Cpp/" itemprop="url" rel="index"><span itemprop="name">Accelerated Cpp</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="using-associative-containers">Using associative containers</h1>
<h2 id="overview">Overview</h2>
<h2 id="typename">typename</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function">T <span class="title">median</span><span class="params">(vector&lt;T&gt; v)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="keyword">typename</span> vector&lt;T&gt;::size_type vec_sz;</span><br><span class="line">    </span><br><span class="line">    vec_sz size = v.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="built_in">domain_error</span>(<span class="string">&quot;median of an empty vector&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">    vec_sz mid = size / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> size % <span class="number">2</span> == <span class="number">0</span> ? (v[mid] + v[mid - <span class="number">1</span>] / <span class="number">2</span> : v[mid]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The next novelty is the use of <strong>typename</strong> in the definition of <code>vec_sz</code>. It is there to tell the implementation that <code>vector&lt;T&gt;::size_type</code> is the name of a type, even though the implementation doesn't yet know what type <code>T</code> represents. Whenever you have a type, such as <code>vector&lt;T&gt;</code>, that depends on a template parameter, and you want to use a member of that type, such as <code>size_type</code>, that is itself a type, you must precede the entire name by typename to let the implementation know to treat the name as a type. Although the standard library ensures that <code>vector&lt;T&gt;::size_type</code> is the name of a type for any T, the implementation, having no special knowledge of the standard-library types, has no way of knowing this fact.</p>
<h2 id="c-standard-syas-nothing-about-how-implementations-manage-template">C++ standard syas nothing about how implementations manage template</h2>
<p>The C++ standard says nothing about how implementations should manage template iinstantiation, so every implementation handles instantiation in its own particular way.</p>
<h2 id="c-iterator-categories">C++ iterator categories</h2>
<p>Instead of being defined by specific types, each category of iterator is defined by the operations that can be performed on it. This definition means that any type that supports the necessary operations can be used as an iterator -- for example, a pointer supports all of the operations required by LegacyRandomAccessIterator, so a pointer can be used anywhere a LegacyRandomAccessIterator is expected.</p>
<p>迭代器的分类的依据并不是迭代器的类型，而是迭代器所支持的操作。换句话说，某个类型只要支持相应的操作，就可以作为迭代器使用。例如，完整对象类型指针支持所有老式随机访问迭代器 (LegacyRandomAccessIterator) 要求的操作，于是任何需要老式随机访问迭代器 (LegacyRandomAccessIterator) 的地方都可以使用指针。</p>
<h3 id="reference">Reference</h3>
<p><a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/iterator">cppreference.com iterator library</a></p>
<h2 id="iterator-ranges-and-off-the-end-values">Iterator ranges and off-the-end values</h2>
<p>One reason is that if the <strong>range had no elements at all</strong>, there would be no last element to mark the end. We would then be in the curious position of having to designate an empty range by an iterator that refers to where the element before the beginning of the range would be. With that strategy, we would have to handle empty ranges differently from all others, which would make our programs harder to understand and less reliable. We saw in §6.1.1/103 that treating empty ranges the same as any others simplified our program.</p>
<p>The second reason is that marking the end of a range by an iterator that is one past the end lets us get away with comparing iterators only for equality and inequality, and makes i tunnecessary to define what it means for one iterator to be less than another. The point is that we can tell immediately if the range is empty by comparing the two iterators; the range is empty if and only if the iterators are equal. If they are unequal, then we know that the beginning iterator refers to an element, so we can do something and then increment that iterator to reduce the size of the range. In other words, marking ranges by the beginning and one past the end allows us to use loops of the form</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// invariant: we must still process the elements in the range [begin, end)</span></span><br><span class="line"><span class="keyword">while</span> (begin != end) &#123;</span><br><span class="line">    <span class="comment">// do something with the element to which begin refers</span></span><br><span class="line">    begin++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="input-and-output-iterators">Input and output iterators</h2>
<p>Why are input and output iterators separate categories from forward iterators if no standard container requires the distinction? One reason is that not all iterators are associated with containers. For example, if c is a container that supports push_back, then back_inserter(c) is an output iterator that meets no other iterator requirements.</p>
<h2 id="using-iterators-for-flexibility">Using iterators for flexibility</h2>
<p>We can be more flexible by rewriting split to take an output iterator instead of returning a value. In this version of the function, we'll use that iterator to write the words that we find Our caller will have bound the iterator to the output location where the values should be placed:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> Out&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">split</span><span class="params">(<span class="type">const</span> string&amp; str, Out os)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">typedef</span> string:const_iterator iter;</span><br><span class="line"></span><br><span class="line">    iter i = str.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="keyword">while</span> (i != str.<span class="built_in">end</span>()) &#123;</span><br><span class="line">            <span class="comment">// ignore leading blanks</span></span><br><span class="line">            i = <span class="built_in">find_if</span>(i, str.<span class="built_in">end</span>(), not_space);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// find end of next word</span></span><br><span class="line">            iter j = <span class="built_in">find_if</span>(i, str.<span class="built_in">end</span>(), space);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// copy the character in [i, j)</span></span><br><span class="line">            <span class="keyword">if</span> (i != str.<span class="built_in">end</span>()) &#123;</span><br><span class="line">                *os++ = <span class="built_in">string</span>(i, j);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            i = j;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/27/Linux/Linux-Shell-scripts-cookbook/Linux-Shell-scripts-cookbook-Have-a-Good-Command/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/27/Linux/Linux-Shell-scripts-cookbook/Linux-Shell-scripts-cookbook-Have-a-Good-Command/" class="post-title-link" itemprop="url">Linux Shell scripts cookbook Have a Good Command</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-10-27 20:30:05 / Modified: 21:02:57" itemprop="dateCreated datePublished" datetime="2022-10-27T20:30:05+08:00">2022-10-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Shell/" itemprop="url" rel="index"><span itemprop="name">Shell</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Shell/Linux-Shell-scripts-cookbook/" itemprop="url" rel="index"><span itemprop="name">Linux Shell scripts cookbook</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="have-a-good-command">Have a Good Command</h1>
<h2 id="overview">Overview</h2>
<h2 id="recording-and-playing-back-terminalsessions">Recording and playing back terminalsessions</h2>
<p>script和scriptreplay命令在绝大多数GNU/Linux发行版上都可以找到</p>
<p>可以通过录制终端会话来制作命令行技巧视频教程，也可以与他人分享会话记录文件，研究如何使用命令行完成某项任务</p>
<p>example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ script -t 2&gt; timing.log -a output.session</span><br><span class="line"></span><br><span class="line"><span class="comment"># 演示tclsh</span></span><br><span class="line">$ tclsh</span><br><span class="line">$ puts [<span class="built_in">expr</span> 2 + 2]</span><br><span class="line">4</span><br><span class="line">% <span class="built_in">exit</span></span><br><span class="line">$ <span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
<p><code>-t</code>选项将时间戳写入timing.log文件，<code>-a</code>选项将会话记录写入output.session文件</p>
<p>利用文件timing.log和output.session，可以按照下面的方法回放命令执行过程</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ scriptreplay timing.log output.session</span><br><span class="line"><span class="comment"># will playing</span></span><br></pre></td></tr></table></figure>
<h2 id="finding-files-and-file-listing">Finding files and file listing</h2>
<p>find命令的工作方式如下：沿着文件层次结构向下遍历，匹配符合条件的文件，执行相应 的操作。默认的操作是打印出文件和目录，这也可以使用-print选项来指定。</p>
<p>example: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ find . -<span class="built_in">print</span></span><br><span class="line">.<span class="built_in">history</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure> print选项使用（换行符）分隔输出的每个文件或目录名</p>
<p>而-print0选项则使用空字符'\0'来分隔</p>
<p>-print0的主要用法是将包含换行符或空白字符的文件名传给xargs命令</p>
<p>example: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$&gt; <span class="built_in">echo</span> <span class="string">&quot;test&quot;</span> &gt; <span class="string">&quot;file name&quot;</span></span><br><span class="line">$&gt; find . -<span class="built_in">type</span> f -<span class="built_in">print</span> | xargs <span class="built_in">ls</span> -l</span><br><span class="line"><span class="built_in">ls</span>: cannot access /file: No such file or directory</span><br><span class="line"><span class="built_in">ls</span>: cannot access name: No such file or directory</span><br><span class="line">$&gt; find . -<span class="built_in">type</span> f -print0 | xargs -0 <span class="built_in">ls</span> -l</span><br><span class="line">-rw-r--r-- 1 user group 5 Aug 24 15:00 ./file name</span><br></pre></td></tr></table></figure></p>
<h3 id="search-based-on-name-or-regular-expression-match">Search based on name or regular expression match</h3>
<p>find命令的-name选项可以根据文件名进行搜索 这个模式可以是通配符，也可以是正则表达式</p>
<p>example: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ find . -name <span class="string">&quot;*.txt&quot;</span></span><br><span class="line">./file.txt</span><br><span class="line">./file2.txt</span><br></pre></td></tr></table></figure></p>
<p>注意<em>.txt两边的单引号。shell会扩展没有引号或是出现在双引号（"）中 的通配符。单引号能够阻止shell扩展</em>.txt，使得该字符串能够原封不动地传给 find命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ find /home/slynux -name <span class="string">&#x27;*.txt&#x27;</span> -<span class="built_in">print</span></span><br></pre></td></tr></table></figure>
<h4 id="忽略字母大小写">忽略字母大小写</h4>
<p>find命令有一个选项-iname（忽略字母大小写），该选项的作用和-name类似，只不过在匹</p>
<p>配文件名时忽略字母大小写</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span></span><br><span class="line">example.txt EXAMPLE.txt file.txt</span><br><span class="line">$ find . -iname <span class="string">&quot;example*&quot;</span> -<span class="built_in">print</span></span><br><span class="line">./example.txt</span><br><span class="line">./EXAMPLE.txt</span><br></pre></td></tr></table></figure>
<h4 id="find-逻辑操作符">find 逻辑操作符</h4>
<p>find命令支持逻辑操作符。-a和-and选项可以执行逻辑与（AND）操作， -o和-or选项可以执行逻辑或（OR）操作。</p>
<p>example: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span></span><br><span class="line">new.txt some.jpg text.pdf stuff.png</span><br><span class="line">$ find . \( -name <span class="string">&quot;*.txt&quot;</span> -o -name <span class="string">&quot;*.pdf&quot;</span> \) -<span class="built_in">print</span></span><br><span class="line">./text.txt</span><br><span class="line">./next.txt</span><br></pre></td></tr></table></figure> （以及）用于将-name '<em>.txt' -o -name '</em>.pdf'视为一个整体。</p>
<p>下面的命令演示了如何使用-and操作符选择名字以s开头且其中包含e的文件： <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ find . \( -name <span class="string">&#x27;*e*&#x27;</span> -and -name <span class="string">&#x27;s*&#x27;</span> \) -<span class="built_in">print</span></span><br></pre></td></tr></table></figure></p>
<h4 id="限制所匹配文件的路径以及名称">限制所匹配文件的路径以及名称</h4>
<p>-path选项可以限制所匹配文件的路径及名称。例如，$ find /home/users -path '<em>/slynux/</em>' -name '*.txt' –print能够匹配文件/home/users/slynux/readme.txt，但无法匹 配/home/users/slynux.txt。</p>
<p>III :-regex选项和-path类似，只不过前者是基于正则表达式来匹配文件路径的。</p>
<p>下面的命令可以匹配.py或.sh文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span></span><br><span class="line">new.PY next.jpg test.py script.sh</span><br><span class="line">$ find . -regex <span class="string">&#x27;.*\.\(py\|sh\)&#x27;</span></span><br><span class="line">./test.py</span><br><span class="line">script.sh</span><br></pre></td></tr></table></figure>
<p>-iregex 选项可以让正则表达式在匹配时忽略大小写。</p>
<p>example: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ find . -iregex <span class="string">&#x27;.*\.\(py\|sh\)$&#x27;</span></span><br><span class="line">./test.py</span><br><span class="line">./new.PY</span><br><span class="line">./script.sh</span><br></pre></td></tr></table></figure></p>
<h3 id="negating-arguments">Negating arguments</h3>
<p>find也可以用!排除匹配到的模式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ find . ! -name <span class="string">&#x27;*.txt&#x27;</span> -<span class="built_in">print</span></span><br><span class="line">.</span><br><span class="line">./next.txt</span><br><span class="line">./test.txt</span><br><span class="line">./new.txt</span><br></pre></td></tr></table></figure>
<h3 id="searching-based-on-the-directory-depth">Searching based on the directory depth</h3>
<p>find命令在查找时会遍历完所有的子目录。默认情况下，find命令不会跟随符号链接。-L选项可以强制其改变这种行为。但如果碰上了指向自身的链接，find命令就会陷入死循环中。</p>
<p>-maxdepth和–mindepth选项可以限制find命令遍历的目录深度。这可以避免find命令没完没了地查找。</p>
<p>/proc文件系统中包含了系统与当前执行任务的信息。特定任务的目录层次相当深，其中还有一些绕回到自身（loop back on themselves）的符号链接。 系统中运行的每个进程在proc中都有对应的子目录，其名称就是该进程的进程ID。这个目录下有一个叫作cwd的链接，指向进程的当前工作目录。</p>
<p>example: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ find -L /proc -maxdepth 1 -name <span class="string">&#x27;bundlemaker.def&#x27;</span> 2&gt;/dev/null</span><br></pre></td></tr></table></figure></p>
<ul>
<li>-L选项告诉find命令跟随符号链接</li>
<li>从/proc目录开始查找</li>
<li>-maxdepth 1将搜索范围仅限制在当前目录</li>
<li>-name 'bundlemaker.def'指定待查找的文件</li>
<li>2&gt;/dev/null将有关循环链接的错误信息发送到空设备中</li>
</ul>
<p>Tips: -maxdepth和-mindepth应该在find命令中及早出现。如果作为靠后的选项 ，有可能会影响到find的效率，因为它不得不进行一些不必要的检查。例如， 如果-maxdepth出现在-type之后，find首先会找出-type所指定的文件，然 后再在匹配的文件中过滤掉不符合指定深度的那些文件。但是如果反过来，在 -type之前指定目录深度，那么find就能够在找到所有符合指定深度的文件后, 再检查这些文件的类型，这才是最有效的搜索之道。</p>
<h3 id="searching-based-on-file-type">Searching based on file type</h3>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/26/Leetcode/LeetCode-862-Shortest-Subarray-with-Sum-at-Least-K/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/26/Leetcode/LeetCode-862-Shortest-Subarray-with-Sum-at-Least-K/" class="post-title-link" itemprop="url">LeetCode 862. Shortest Subarray with Sum at Least K</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-10-26 23:12:25" itemprop="dateCreated datePublished" datetime="2022-10-26T23:12:25+08:00">2022-10-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-10-27 00:34:59" itemprop="dateModified" datetime="2022-10-27T00:34:59+08:00">2022-10-27</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="leetcode-862.-shortest-subarray-with-sum-at-least-k">LeetCode 862. Shortest Subarray with Sum at Least K</h1>
<p>久违的算法题解</p>
<p>铁子某课给的题目，虽然当时实在无心写。</p>
<p>传送门：</p>
<p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/shortest-subarray-with-sum-at-least-k/">LeetCode 862. Shortest Subarray with Sum at Least K</a></p>
<h2 id="main-idea">Main Idea</h2>
<blockquote>
<p>A subarray is a contiguous part of an array.</p>
</blockquote>
<p>其实我刚开始看成了 <code>subsequence</code>...</p>
<p>现在看一下此案是subarray...</p>
<pre>
             |--> sum >= k, shortest subarray
             |
        |----------| subarray
|-------------------------------------| array
</pre>
<p>献祭出我的字符画。</p>
<p>Pay attention: &gt; -10^5 &lt;= nums[i] &lt;= 10^5</p>
<p>这说明前缀和不单调，没有双指针玩咯... see <a target="_blank" rel="noopener" href="https://leetcode.com/problems/minimum-size-subarray-sum/">LeetCode 209. Minimum Size Subarray Sum</a></p>
<p><del>好，快跑</del></p>
<p>那就先想暴力，枚举所有区间 等价于枚举区间的两端， 我习惯枚举右端点</p>
<p>然后区间快速查询这肯定得来个前后和吧</p>
<pre>
        j          i
|-------|----------|------------------| array
</pre>
<p>Need to promise that <span class="math inline">\(S_{i} - S_{j} &gt;= k\)</span> and <span class="math inline">\(i - j\)</span> is minimum(si is array of prefix sum)</p>
<p>问题就转化为了 si sj k 三者的关系</p>
<p>为了减少枚举的次数，需要在枚举的过程中将一些不可能解给pass掉</p>
<pre>
Sx
^
|       /
|      /--> Sj >= Si
|     /
|    /--> Si
|   /
|  /
| /
|
|------------------> x
</pre>
<p>如果存在t &gt; i, 满足St - Sj &gt;= k, 因为Si &lt; Sj(肯定也满足&gt;= k), 且i 距离后面的t更近(数组长度更小)， 所以i更好, 所以那些Sj &gt;= Si的j们都可以pass掉了</p>
<pre>
Sx
^
|
|
|
|    /--> Si
|   /
|  /
| /
|
|------------------> x
</pre>
<p>这就意味着，当找到一个Si的时候，可以把Si的都干没掉</p>
<p>那么我们需要一个数据结构来维护这个Sx</p>
<p><strong>队列能维护顺序，单调性能保证首尾的max和min 所以可以用单调队列来维护数据</strong></p>
<p>维护了一个单调队列以后，找到一个Si（队列里的max）的时候 可以在队列里找到一个Sj（队列里的min）满足Si - Sj &gt;= k 都要枚举一遍(从最小开始枚举比较自然) 这里定义个说法： 如果Sj可以和Si满足上述的不等式我们就说i和j配对</p>
<p>如果可以找到个j和i配对，那么一定比接下来加入到队列里的i（max）更好 因为i更小，距离更近, 那么j就可以从单调队列里删除掉了。</p>
<p>这样的操作，能满足所有的元素只会出队一次，入队一次， 所以时间复杂度是O(n)</p>
<p>很显然，这样的单调队列不是典型的，需要现场分析</p>
<h2 id="code">Code</h2>
<p>or see <a target="_blank" rel="noopener" href="https://github.com/krmmzs/Leetcode/blob/master/0862-shortest-subarray-with-sum-at-least-k-hcfy-anchor/0862-shortest-subarray-with-sum-at-least-k-hcfy-anchor.cpp">github</a></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL; <span class="comment">// will bigger than int</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">shortestSubarray</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> k)</span> </span>&#123;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt;::size_type n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;LL&gt; <span class="title">s</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++) &#123;</span><br><span class="line">            s[i] = s[i - <span class="number">1</span>] + nums[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        deque&lt;<span class="type">int</span>&gt; q; <span class="comment">// contains index, not value</span></span><br><span class="line">        q.<span class="built_in">push_back</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="type">int</span> res = INT_MAX;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++) &#123;</span><br><span class="line">            <span class="keyword">while</span> (!q.<span class="built_in">empty</span>() &amp;&amp; s[i] - s[q.<span class="built_in">front</span>()] &gt;= k) &#123;</span><br><span class="line">                res = <span class="built_in">min</span>(res, i - q.<span class="built_in">front</span>());</span><br><span class="line">                q.<span class="built_in">pop_front</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (!q.<span class="built_in">empty</span>() &amp;&amp; s[i] &lt;= s[q.<span class="built_in">back</span>()]) &#123;</span><br><span class="line">                q.<span class="built_in">pop_back</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            q.<span class="built_in">push_back</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (res == INT_MAX) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">krmmzs</p>
  <div class="site-description" itemprop="description">233</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">75</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">42</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/krmmzs" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;krmmzs" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:belliyan250@gmail.com" title="E-Mail → mailto:belliyan250@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.youtube.com/channel/UCh2c-Y0OmoDUfeZHomm_Llg" title="YouTube → https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCh2c-Y0OmoDUfeZHomm_Llg" rel="noopener" target="_blank"><i class="fab fa-youtube fa-fw"></i>YouTube</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://t.me/krmmzs" title="Telegram → https:&#x2F;&#x2F;t.me&#x2F;krmmzs" rel="noopener" target="_blank"><i class="fab fa-telegram fa-fw"></i>Telegram</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">krmmzs</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  

</body>
</html>
