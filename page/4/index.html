<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="233">
<meta property="og:type" content="website">
<meta property="og:title" content="krmmzs">
<meta property="og:url" content="http://example.com/page/4/index.html">
<meta property="og:site_name" content="krmmzs">
<meta property="og:description" content="233">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="krmmzs">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>krmmzs</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">krmmzs</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/11/03/Python/Python-for-scripts/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/03/Python/Python-for-scripts/" class="post-title-link" itemprop="url">Python for scripts</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-11-03 15:19:02 / Modified: 20:20:18" itemprop="dateCreated datePublished" datetime="2022-11-03T15:19:02+08:00">2022-11-03</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="python-for-scripts">Python for scripts</h1>
<p>Use Python as a replacement for shell scripts, using it to automate com‐mon system tasks, such as manipulating files.</p>
<h2 id="accepting-script-input-via-redirection-pipes-orinput-files">Accepting Script Input via Redirection, Pipes, orInput Files</h2>
<p>你希望你的脚本接受任何用户认为最简单的输入方式。包括将命令行的输出通过管道传递给该脚本、重定向文件到该脚本，或在命令行中传递一个文件名或文件名列表给该脚本</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="keyword">import</span> fileinput</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> fileinput.<span class="built_in">input</span>() <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">        <span class="built_in">print</span>(f.filename(), f.lineno(), line, end=<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="usage">Usage</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> | python3 script.py</span><br><span class="line">python3 script.py &lt; file.txt</span><br><span class="line">python3 script.py file1.txt file2.txt</span><br></pre></td></tr></table></figure>
<h2 id="terminating-a-program-with-an-error-message">Terminating a Program with an Error Message</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin python3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">raise</span> SystemExit(<span class="string">&#x27;It failed!&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="parsing-command-line-options">Parsing Command-Line Options</h2>
<h2 id="quick-links-for-add_argument">Quick Links for add_argument</h2>
<p><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/argparse.html#quick-links-for-add-argument">Quick Links for add_argument</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># search.py</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Hypothetical command line tool for searching a collection of</span></span><br><span class="line"><span class="string">files for one or more text patterns.</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line">parser = argparse.ArgumentParser(description=<span class="string">&#x27;Search some files&#x27;</span>)</span><br><span class="line"></span><br><span class="line">parser.add_argument(dest=<span class="string">&#x27;filenames&#x27;</span>,metavar=<span class="string">&#x27;filename&#x27;</span>, nargs=<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line"></span><br><span class="line">parser.add_argument(<span class="string">&#x27;-p&#x27;</span>, <span class="string">&#x27;--pat&#x27;</span>,metavar=<span class="string">&#x27;pattern&#x27;</span>, required=<span class="literal">True</span>,</span><br><span class="line">                    dest=<span class="string">&#x27;patterns&#x27;</span>, action=<span class="string">&#x27;append&#x27;</span>,</span><br><span class="line">                    <span class="built_in">help</span>=<span class="string">&#x27;text pattern to search for&#x27;</span>)</span><br><span class="line"></span><br><span class="line">parser.add_argument(<span class="string">&#x27;-v&#x27;</span>, dest=<span class="string">&#x27;verbose&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, </span><br><span class="line">                    <span class="built_in">help</span>=<span class="string">&#x27;verbose mode&#x27;</span>)</span><br><span class="line"></span><br><span class="line">parser.add_argument(<span class="string">&#x27;-o&#x27;</span>, dest=<span class="string">&#x27;outfile&#x27;</span>, action=<span class="string">&#x27;store&#x27;</span>,</span><br><span class="line">                    <span class="built_in">help</span>=<span class="string">&#x27;output file&#x27;</span>)</span><br><span class="line"></span><br><span class="line">parser.add_argument(<span class="string">&#x27;--speed&#x27;</span>, dest=<span class="string">&#x27;speed&#x27;</span>, action=<span class="string">&#x27;store&#x27;</span>,</span><br><span class="line">                    choices=&#123;<span class="string">&#x27;slow&#x27;</span>,<span class="string">&#x27;fast&#x27;</span>&#125;, default=<span class="string">&#x27;slow&#x27;</span>,</span><br><span class="line">                    <span class="built_in">help</span>=<span class="string">&#x27;search speed&#x27;</span>)</span><br><span class="line"></span><br><span class="line">args = parser.parse_args()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Output the collected arguments</span></span><br><span class="line"><span class="built_in">print</span>(args.filenames)</span><br><span class="line"><span class="built_in">print</span>(args.patterns)</span><br><span class="line"><span class="built_in">print</span>(args.verbose)</span><br><span class="line"><span class="built_in">print</span>(args.outfile)</span><br><span class="line"><span class="built_in">print</span>(args.speed)</span><br></pre></td></tr></table></figure>
<p>一旦参数选项被指定，你就可以执行parser.parse()方法了。它会处理sys.argv 的值并返回一个结果实例。每个参数值会被设置成该实例中add_argument()方法的 dest参数指定的属性值。</p>
<h3 id="example-in-github">Example in github</h3>
<p><a target="_blank" rel="noopener" href="https://github.com/SaiHarshaK/aria2c-for-wget-curl/blob/605ed893a482687f87eb36a52227701f01dbadbd/curl/__main__.py">SaiHarshaK/aria2c-for-wget-curl</a></p>
<h2 id="prompting-for-a-password-at-runtime">Prompting for a Password at Runtime</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> getpass</span><br><span class="line"></span><br><span class="line">user = getpass.getuser()</span><br><span class="line">passwd = getpass.getpass()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> svc_login(user, passwd):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Yay!&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Boo!&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>注意在前面代码中getpass.getuser()不会弹出用户名的输入提示。它会根据该 用户的shell环境或者会依据本地系统的密码库（支持pwd模块的平台）来使用当前用 户的登录名， 如果你想显示的弹出用户名输入提示，使用内置的input函数： <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user = <span class="built_in">input</span>(<span class="string">&#x27;Enter your username: &#x27;</span>)</span><br></pre></td></tr></table></figure> 还有一点很重要，有些系统可能不支持getpass()方法隐藏输入密码。 这种情况下，Python会提前警告你这些问题（例如它会警告你说密码会以明文形式显示）</p>
<h2 id="getting-the-terminal-size">Getting the Terminal Size</h2>
<h3 id="problem">Problem</h3>
<p>You need to get the terminal size in order to properly format the output of your program.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># os.get_terminal_size()</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">sz = os.get_terminal_size()</span><br><span class="line"><span class="built_in">print</span>(sz)</span><br><span class="line"><span class="built_in">print</span>(sz.columns)</span><br><span class="line"><span class="built_in">print</span>(sz.lines)</span><br></pre></td></tr></table></figure>
<h2 id="executing-an-external-command-and-getting-itsoutput">Executing an External Command and Getting ItsOutput</h2>
<h3 id="problem-1">Problem</h3>
<p>You want to execute an external command and collect its output as a Python string</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line">out_bytes = subprocess.check_output([<span class="string">&#x27;netstat&#x27;</span>, <span class="string">&#x27;-a&#x27;</span>])</span><br></pre></td></tr></table></figure>
<p>这段代码执行一个指定的命令并将执行结果以一个字节字符串的形式返回。如果你需要文本形式返回，加一个解码步骤即可。例如： <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">out_text = out_bytes.decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br></pre></td></tr></table></figure> 如果被执行的命令以非零码返回，就会抛出异常。下面的例子捕获到错误并获取返回码： <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    out_bytes = sbuprocess.check_output([<span class="string">&#x27;cmd&#x27;</span>, <span class="string">&#x27;arg1&#x27;</span>, <span class="string">&#x27;arg2&#x27;</span>])</span><br><span class="line"><span class="keyword">except</span> subprocess.CalledProcessError <span class="keyword">as</span> e:</span><br><span class="line">    out_bytes = e.output       <span class="comment"># Output generated before error</span></span><br><span class="line">    code      = e.returncode   <span class="comment"># Return code</span></span><br></pre></td></tr></table></figure></p>
<p>默认情况下，check_output()仅仅返回输入到标准输出的值。如果你需要同时收集标准输出和错误输出，使用stderr参数： <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">out_bytes = subprocess.check_output([<span class="string">&#x27;cmd&#x27;</span>, <span class="string">&#x27;arg1&#x27;</span>, <span class="string">&#x27;arg2&#x27;</span>],</span><br><span class="line">                                    stderr=subprocess.STDOUT)</span><br></pre></td></tr></table></figure> 如果你需要用一个超时机制来执行命令，使用timeout参数： <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    out_bytes = subprocess.check_output([<span class="string">&#x27;cmd&#x27;</span>, <span class="string">&#x27;arg1&#x27;</span>, <span class="string">&#x27;arg2&#x27;</span>],</span><br><span class="line">                                        timeout=<span class="number">5</span>)</span><br><span class="line"><span class="keyword">except</span> subprocess.TimeoutExpired <span class="keyword">as</span> e:</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure> 通常来讲，命令的执行不需要使用到底层shell环境（比如sh、bash）。一个字符串列表会被传递给一个低级系统命令，比如os.execve()。如果你想让命令被一个shell执行，传递一个字符串参数，并设置参数shell=True.有时候你想要Python去执行 一个复杂的shell命令的时候这个就很有用了，比如管道流、I/O重定向和其他特性。例如： <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">out_bytes = subprocess.check_output(<span class="string">&#x27;grep python | wc &gt; out&#x27;</span>, shell=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure> 需要注意的是在shell中执行命令会存在一定的安全风险，特别是当参数来自于用户输入时。这时候可以使用shlex.quote()函数来将参数正确的用双引用引起来。</p>
<p>使用check_output()函数是执行外部命令并获取其返回值的最简单方式。但是，如果你需要对子进程做更复杂的交互，比如给它发送输入，你得采用另外一种方法。这时候可直接使用subprocess.Popen类。例如： <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line"><span class="comment"># Some text to send</span></span><br><span class="line">text = <span class="string">b&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">hello world</span></span><br><span class="line"><span class="string">this is a test</span></span><br><span class="line"><span class="string">goodbye</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Launch a command with pipes</span></span><br><span class="line">p = subprocess.Popen([<span class="string">&#x27;wc&#x27;</span>],</span><br><span class="line">          stdout = subprocess.PIPE,</span><br><span class="line">          stdin = subprocess.PIPE)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Send the data and get the output</span></span><br><span class="line">stdout, stderr = p.communicate(text)</span><br><span class="line"></span><br><span class="line">text = stdout.decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(text)</span><br></pre></td></tr></table></figure> subprocess模块对于依赖TTY的外部命令不合适用。例如，你不能使用它来自动化一个用户输入密码的任务（比如一个ssh会话）。这时候，你需要使用到第三方模块了，比如基于著名的expect家族的工具（pexpect或类似的）</p>
<h2 id="copying-or-moving-files-and-directories">Copying or Moving Files and Directories</h2>
<p>use shutil <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line"><span class="comment"># Copy src to dst. (cp src dst)</span></span><br><span class="line">shutil.copy(src, dst)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Copy files, but preserve metadata (cp -p src dst)</span></span><br><span class="line">shutil.copy2(src, dst)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Copy directory tree (cp -R src dst)</span></span><br><span class="line">shutil.copytree(src, dst)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Move src to dst (mv src dst)</span></span><br><span class="line">shutil.move(src, dst)</span><br></pre></td></tr></table></figure></p>
<p>More see <a target="_blank" rel="noopener" href="https://docs.python.org/3/library/shutil.html">shutil — High-level file operations</a></p>
<p>默认情况下，对于符号链接而已这些命令处理的是它指向的东西。例如，如果源文件是一个符号链接，那么目标文件将会是符号链接指向的文件。如果你只想复制符号链接本身，那么需要指定关键字参数follow_symlinks,如下： 如果你想保留被复制目录中的符号链接，像这样做：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutil.copytree(src, dst, symlinks=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>copytree()可以让你在复制过程中选择性的忽略某些文件或目录。你可以提供一个忽略函数，接受一个目录名和文件名列表作为输入，返回一个忽略的名称列表。例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">ignore_pyc_files</span>(<span class="params">dirname, filenames</span>):</span><br><span class="line">    <span class="keyword">return</span> [name <span class="keyword">for</span> name <span class="keyword">in</span> filenames <span class="keyword">if</span> name.endswith(<span class="string">&#x27;.pyc&#x27;</span>)]</span><br><span class="line">shutil.copytree(src, dst, ignore=ignore_pyc_files)</span><br></pre></td></tr></table></figure>
<p>由于忽略某种模式的文件名是很常见的，因此一个便捷的函数ignore_patterns()已经包含在里面了。例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutil.copytree(src, dst, ignore=shutil.ignore_patterns(<span class="string">&#x27;*-&#x27;</span>, <span class="string">&#x27;*.pyc&#x27;</span>))</span><br></pre></td></tr></table></figure>
<p>使用shutil复制文件和目录也忒简单了点吧。不过，对于文件元数据信息，copy2()这样的函数只能尽自己最大能力来保留它。访问时间、创建时间和权限这些基本信息会被保留，但是对于所有者、ACLs、资源fork和其他更深层次的文件元信息就说不准了，这个还得依赖于底层操作系统类型和用户所拥有的访问权限。你通常不会去使用shutil.copytree()函数来执行系统备份。当处理文件名的时候，最好使用os.path中的函数来确保最大的可移植性（特别是同时要适用于Unix和Windows）。例如： <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>filename = <span class="string">&#x27;/User/guido/programs/spam.py&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os.path</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.basename(filename)</span><br><span class="line"><span class="string">&#x27;spam.py&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.dirname(filename)</span><br><span class="line"><span class="string">&#x27;/User/guido/programs&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.join(<span class="string">&#x27;tmp&#x27;</span>, <span class="string">&#x27;data&#x27;</span>, os.path.basename(filename))</span><br><span class="line"><span class="string">&#x27;tmp/data/spam.py&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.expanduser(<span class="string">&#x27;~guido/programs/spam.py&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;/User/guido/programs/spam.py&#x27;</span></span><br></pre></td></tr></table></figure> 使用copytree()复制文件夹的一个棘手的问题是对于错误的处理。例如，在复制过程中，函数可能会碰到损坏的符号链接，因为权限无法访问文件的问题等等。为了解决这个问题，所有碰到的问题会被收集到一个列表中并打包为一个单独的异常，到了最后再抛出。下面是一个例子： <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    shutil.copytree(src, dst)</span><br><span class="line"><span class="keyword">except</span> shutil.Error <span class="keyword">as</span> e:</span><br><span class="line">    <span class="keyword">for</span> src, dst, msg <span class="keyword">in</span> e.args[<span class="number">0</span>]:</span><br><span class="line">        <span class="comment"># src is source name</span></span><br><span class="line">        <span class="comment"># dst is destination name</span></span><br><span class="line">        <span class="comment"># msg is error message from exception</span></span><br><span class="line">        <span class="built_in">print</span>(dst, msg)</span><br></pre></td></tr></table></figure> 如果你提供关键字参数ignore_dangling_symlinks=True，这时候copytree()会忽略掉无效符号链接。</p>
<h2 id="creating-and-unpacking-archives">Creating and Unpacking Archives</h2>
<p>use shutil</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> shutil</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>shutil.unpack_archive(<span class="string">&#x27;Pytthon-3.3.0.tgz&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>shutil.make_archive(<span class="string">&#x27;py33&#x27;</span>,<span class="string">&#x27;zip&#x27;</span>,<span class="string">&#x27;Python-3.3.0&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;/Users/beazley/Downloads/py33.zip&#x27;</span></span><br></pre></td></tr></table></figure>
<p>make_archive()的 第 二 个 参 数 是 期 望 的 输 出 格 式。可 以 使 用get_archive_formats()获取所有支持的归档格式列表。例如： <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>shutil.get_archive_formats()</span><br><span class="line">[(<span class="string">&#x27;bztar&#x27;</span>, <span class="string">&quot;bzip2&#x27;ed tar-file&quot;</span>), (<span class="string">&#x27;gztar&#x27;</span>, <span class="string">&quot;gzip&#x27;ed tar-file&quot;</span>), (<span class="string">&#x27;tar&#x27;</span>, <span class="string">&#x27;uncompressed tar file&#x27;</span>), (<span class="string">&#x27;xztar&#x27;</span>, <span class="string">&quot;xz&#x27;ed tar-file&quot;</span>), (<span class="string">&#x27;zip&#x27;</span>, <span class="string">&#x27;ZIP file&#x27;</span>)]</span><br></pre></td></tr></table></figure> 这些函数还有很多其他选项，用于日志打印、预检、文件权限等等, 参考<a target="_blank" rel="noopener" href="https://docs.python.org/3/library/shutil.html">shutil</a></p>
<h2 id="to-be-continued...">To be continued...</h2>
<h2 id="references">References</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.amazon.com/Python-Cookbook-Third-David-Beazley/dp/1449340377">python cookbook 3rd</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/dabeaz/python-cookbook/tree/master/src">python cookbook source code</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/fileinput.html">docs.python.org: fileinput(py3.11.0)</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/python/cpython/blob/3.11/Lib/fileinput.py">cpython: fileinput</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/argparse.html">docs.python.org: argparse</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/11/02/LeetCode-37-Sudoku-Solver/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/02/LeetCode-37-Sudoku-Solver/" class="post-title-link" itemprop="url">LeetCode 37. Sudoku Solver</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-02 17:08:08" itemprop="dateCreated datePublished" datetime="2022-11-02T17:08:08+08:00">2022-11-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-04 18:41:21" itemprop="dateModified" datetime="2022-11-04T18:41:21+08:00">2022-11-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="leetcode-37.-sudoku-solver">LeetCode 37. Sudoku Solver</h1>
<h2 id="main-idea">Main Idea</h2>
<p>暴搜</p>
<p>然后状态判断就不状态压缩了，直接多维数组表示增加的信息</p>
<h2 id="code">Code</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">bool</span> row[<span class="number">9</span>][<span class="number">9</span>], col[<span class="number">9</span>][<span class="number">9</span>], cell[<span class="number">3</span>][<span class="number">3</span>][<span class="number">9</span>];</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">solveSudoku</span><span class="params">(vector&lt;vector&lt;<span class="type">char</span>&gt;&gt;&amp; board)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">memset</span>(row, <span class="number">0</span>, <span class="built_in">sizeof</span>(row));</span><br><span class="line">        <span class="built_in">memset</span>(col, <span class="number">0</span>, <span class="built_in">sizeof</span>(col));</span><br><span class="line">        <span class="built_in">memset</span>(cell, <span class="number">0</span>, <span class="built_in">sizeof</span>(cell));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i ++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">9</span>; j ++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (board[i][j] != <span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">                    <span class="type">int</span> t = board[i][j] - <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">                    row[i][t] = col[j][t] = cell[i / <span class="number">3</span>][j / <span class="number">3</span>][t] = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">dfs</span>(board, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">dfs</span><span class="params">(vector&lt;vector&lt;<span class="type">char</span>&gt;&gt;&amp; board, <span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (y == <span class="number">9</span>) &#123;</span><br><span class="line">            x ++, y = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (x == <span class="number">9</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (board[x][y] != <span class="string">&#x27;.&#x27;</span>) <span class="keyword">return</span> <span class="built_in">dfs</span>(board, x, y + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i ++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!row[x][i] &amp;&amp; !col[y][i] &amp;&amp; !cell[x / <span class="number">3</span>][y / <span class="number">3</span>][i]) &#123;</span><br><span class="line">                board[x][y] = <span class="string">&#x27;1&#x27;</span> + i;</span><br><span class="line">                row[x][i] = col[y][i] = cell[x / <span class="number">3</span>][y / <span class="number">3</span>][i] = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">dfs</span>(board, x, y + <span class="number">1</span>)) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                board[x][y] = <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">                row[x][i] = col[y][i] = cell[x / <span class="number">3</span>][y / <span class="number">3</span>][i] = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">纯<span class="type">int</span>, 能用q.<span class="built_in">size</span>()</span><br><span class="line">```cpp</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">maxSlidingWindow</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// typedef vector&lt;int&gt;::size_type vec_sz;</span></span><br><span class="line">        deque&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; res;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; nums.<span class="built_in">size</span>(); i ++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (q.<span class="built_in">size</span>() &amp;&amp; i - k + <span class="number">1</span> &gt; q.<span class="built_in">front</span>()) q.<span class="built_in">pop_front</span>();</span><br><span class="line">            <span class="keyword">while</span> (q.<span class="built_in">size</span>() &amp;&amp; nums[i] &gt; nums[q.<span class="built_in">back</span>()]) q.<span class="built_in">pop_back</span>();</span><br><span class="line">            q.<span class="built_in">push_back</span>(i);</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= k - <span class="number">1</span>) res.<span class="built_in">push_back</span>(nums[q.<span class="built_in">front</span>()]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>vector<int>::size_type 只能是用下标表示 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">maxSlidingWindow</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">typedef</span> vector&lt;<span class="type">int</span>&gt;::size_type vec_sz;</span><br><span class="line">        deque&lt;vec_sz&gt; q;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; res;</span><br><span class="line">        <span class="keyword">for</span> (vec_sz i = <span class="number">0</span>; i &lt; nums.<span class="built_in">size</span>(); i ++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= k - <span class="number">1</span> &amp;&amp; i - k + <span class="number">1</span> &gt; q.<span class="built_in">front</span>()) q.<span class="built_in">pop_front</span>();</span><br><span class="line">            <span class="keyword">while</span> (q.<span class="built_in">size</span>() &amp;&amp; nums[i] &gt; nums[q.<span class="built_in">back</span>()]) q.<span class="built_in">pop_back</span>();</span><br><span class="line">            q.<span class="built_in">push_back</span>(i);</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= k - <span class="number">1</span>) res.<span class="built_in">push_back</span>(nums[q.<span class="built_in">front</span>()]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/11/02/Leetcode/LeetCode-36-Valid-Sudoku/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/02/Leetcode/LeetCode-36-Valid-Sudoku/" class="post-title-link" itemprop="url">LeetCode 36. Valid Sudoku</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-11-02 16:46:45 / Modified: 17:07:39" itemprop="dateCreated datePublished" datetime="2022-11-02T16:46:45+08:00">2022-11-02</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="leecode-36.-valid-sudoku">LeeCode 36. Valid Sudoku</h1>
<p>传送门: <a target="_blank" rel="noopener" href="https://leetcode.com/problems/valid-sudoku/">https://leetcode.com/problems/valid-sudoku/</a></p>
<h2 id="main-idea">Main Idea</h2>
<p>居然只是模拟题，水一下。</p>
<h2 id="code">Code</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isValidSudoku</span><span class="params">(vector&lt;vector&lt;<span class="type">char</span>&gt;&gt;&amp; board)</span> </span>&#123;</span><br><span class="line">        <span class="type">bool</span> st[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i ++) &#123;</span><br><span class="line">            <span class="built_in">memset</span>(st, <span class="number">0</span>, <span class="keyword">sizeof</span> st);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">9</span>; j ++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (board[i][j] != <span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">                    <span class="type">int</span> idx = board[i][j] - <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">                    <span class="keyword">if</span> (st[idx]) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        st[idx] = <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i ++) &#123;</span><br><span class="line">            <span class="built_in">memset</span>(st, <span class="number">0</span>, <span class="keyword">sizeof</span> st);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">9</span>; j ++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (board[j][i] != <span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">                    <span class="type">int</span> idx = board[j][i] - <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">                    <span class="keyword">if</span> (st[idx]) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        st[idx] = <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i += <span class="number">3</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">9</span>; j += <span class="number">3</span>) &#123;</span><br><span class="line">                <span class="built_in">memset</span>(st, <span class="number">0</span>, <span class="keyword">sizeof</span> st);</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> x = <span class="number">0</span>; x &lt; <span class="number">3</span>; x ++) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> y = <span class="number">0</span>; y &lt; <span class="number">3</span>; y ++) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (board[i + x][j + y] != <span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">                            <span class="type">int</span> idx =  (board[i + x][j + y] - <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">                            <span class="keyword">if</span> (st[idx]) &#123;</span><br><span class="line">                                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                st[idx] = <span class="literal">true</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/31/Cpp/Accelerated-Cpp/Accelerated-Cpp-chapter09/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/31/Cpp/Accelerated-Cpp/Accelerated-Cpp-chapter09/" class="post-title-link" itemprop="url">Accelerated_Cpp_chapter09</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-10-31 21:06:40 / Modified: 21:08:10" itemprop="dateCreated datePublished" datetime="2022-10-31T21:06:40+08:00">2022-10-31</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Cpp/" itemprop="url" rel="index"><span itemprop="name">Cpp</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Cpp/Accelerated-Cpp/" itemprop="url" rel="index"><span itemprop="name">Accelerated Cpp</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="defining-new-types">Defining new types</h1>
<h2 id="info">Info</h2>
<p>Much of the design of C++ rests on the idea of letting programmers create types that are as easy to use as are the built-in types.</p>
<h2 id="not-member-function">not member function</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">double</span> <span class="title">Student_info::grade</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ::<span class="built_in">grade</span>(midterm, <span class="keyword">final</span>, homework);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>First, note the call to ::grade. Putting :: in front of a name insists on using a version of that name that is not a member of anything.</p>
<h2 id="const-function-and-const-member-function">const function and const member function</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">double</span> <span class="title">Student_info::grade</span><span class="params">()</span> <span class="type">const</span> </span>&#123; ... &#125; <span class="comment">//  member-function version </span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">grade</span><span class="params">(<span class="type">const</span> Student_info&amp;)</span> </span>&#123; ... &#125; <span class="comment">//  original from §4.2.2/63</span></span><br></pre></td></tr></table></figure>
<p>When we call a member function, the object of which it is a member is not an argument. Therefore, there is no entry in the parameter list in which we might be able to say that the object is const. Instead, we qualify the function itself, thereby making it a <strong>const member function</strong>. Member functions that are const may not change the internal state of the object on which they are executing: We are guaranteed that if we call s.grade() on behalf of a <strong>Student_info</strong> object named s, doing so will not change the data members of s.</p>
<p>Because the function guarantees that it will not change the values in the object, we can call it for const objects. By the same token, we cannot call nonconst functions on const objects, so, for example, we cannot call the read member on behalf of a const Student_info object. After all, a function such as read says that it can change the object's state. Calling such a function on a const object could violate our const promise.</p>
<p>It is important to note that even if a program never creates any const objects directly, it may create lots of references to const objects through function calls. When we pass a nonconst object to a function that takes a const reference, then the function treats that object as if it were const, and the compiler will permit it to call only const members of such objects</p>
<h2 id="a-rule-to-judge-whether-a-function-should-be-member-function">A rule to judge whether a function should be member function</h2>
<p>If the function changes the state of an object, then it ought to be a member of that object.</p>
<p>further more</p>
<p>To do so, we should think a bit about what the function does and how users might want to call it.</p>
<h2 id="a-part-of-interface-should-at-same-file">A part of interface should at same file</h2>
<p>Because <strong>compare</strong> is part of our interface, we should include a declaration for this function in the same header that defines <strong>Student_info</strong> and we should include this definition in the associated source file that contains the definitions of the member functions.</p>
<p>see <a href="../../unix-source/chapter09/Student_info.h">Studnet_info.h</a> and <a href="../../unix-source/chapter09/Student_info.cc">Student_info.cc</a></p>
<h2 id="the-synthesized-constructor">The synthesized constructor</h2>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/8106016/c-default-initialization-and-value-initialization-which-is-which-which-is-ca">C++ default initialization and value initialization: which is which, which is called when and how to reliably initialize a template-type member</a></p>
<p>The synthesized constructor will initialize the data members to a value that depends on how the object is being created. If the object is a local variable, then the data members will be be default-initialized (§3.1/38). If the object is used to initialize a container element, either as a side effect of adding a new element to a map, or as the elements of a container defined to have a given size, then the members will be value-initialized (§7.2/125).</p>
<p>These rules areslightly complicated, but their essentials are:</p>
<ul>
<li>If an object is of a class type that defines one or more constructors, then the appropriate constructor completely controls initialization of the objects of that class.</li>
<li>If an object is of built-in type, then value-initializing it sets it to zero, and default-initializing it gives it an undefined value.</li>
<li>Otherwise, the object can be only of a class type that does not define any constructors. In that case, value- or default-initializing the object value- or default-initializes each of its data members. This initialization process will be recursive if any of the data members is of a class type with its own constructor.</li>
</ul>
<h2 id="class-write-conctructor-is-a-good-habit">class write conctructor is a good habit</h2>
<p>It is normally good practice to ensure that every data member has a sensible value at all times</p>
<p>For example, it is possible that later we (or a subsequent maintainer of our code) will add operations that examine these data members. If we don't initialize them in the constructor, then these new operations might cause future failures. Moreover, as we'll see in §11.3.5/201, even though we do not explicitly use midterm or final, there are synthesized operations on the class that could do so. Any use other than writing to an undefined value is illegal (§3.1/38), and so, strictly speaking, we must initialize these values.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/30/Leetcode/LeetCode-33-Search-in-Rotated-Sorted-Array/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/30/Leetcode/LeetCode-33-Search-in-Rotated-Sorted-Array/" class="post-title-link" itemprop="url">LeetCode 33. Search in Rotated Sorted Array</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-10-30 17:58:04 / Modified: 18:28:12" itemprop="dateCreated datePublished" datetime="2022-10-30T17:58:04+08:00">2022-10-30</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="leetcode-33.-search-in-rotated-sorted-array">LeetCode 33. Search in Rotated Sorted Array</h1>
<h2 id="main-idea">Main Idea</h2>
<p>这个翻转让我想到一本书里关于三次reverse就可以得到旋转的方式</p>
<p>虽然和这题没有关系</p>
<blockquote>
<p>You must write an algorithm with O(log n) runtime complexity.</p>
</blockquote>
<p>给的数组升序且unique</p>
<p>如果不旋转直接二分log对吧。</p>
<p>翻转后可以得到两个升序数组, 不那么容易二分了</p>
<p>先找未知的旋转点，以nums[0]为界限，就可以二分出该未知点（二分的本质）</p>
<p>然后判断target在哪个区间，再二分</p>
<p>就可以判断出target是否存在</p>
<pre>

^    /
|   /
|  /
| /
|-------------------
|          /
|         /
|        /
|       /
|      /
|---------------------->
</pre>
<h2 id="code">Code</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">search</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums.<span class="built_in">empty</span>()) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">typedef</span> vector&lt;<span class="type">int</span>&gt;::size_type <span class="type">size_t</span>;</span><br><span class="line">        <span class="type">size_t</span> l = <span class="number">0</span>, r = nums.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">            <span class="type">size_t</span> mid = l + r + <span class="number">1</span> &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[mid] &gt;= nums[<span class="number">0</span>]) &#123;</span><br><span class="line">                l = mid;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                r = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (target &gt;= nums[<span class="number">0</span>]) &#123;</span><br><span class="line">            l = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            l = r + <span class="number">1</span>, r = nums.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">            <span class="type">size_t</span> mid = l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[mid] &gt;= target) &#123;</span><br><span class="line">                r = mid;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                l = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (nums[r] == target) &#123;</span><br><span class="line">            <span class="keyword">return</span> r;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/30/Leetcode/LeetCode-31-Next-Permutation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/30/Leetcode/LeetCode-31-Next-Permutation/" class="post-title-link" itemprop="url">LeetCode 31. Next Permutation</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-10-30 17:10:45 / Modified: 17:49:34" itemprop="dateCreated datePublished" datetime="2022-10-30T17:10:45+08:00">2022-10-30</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="leetcode-31.-next-permutation">LeetCode 31. Next Permutation</h1>
<h2 id="main-idea">Main Idea</h2>
<p>这个感觉在大二上看离散数学黑书里研究过，建议直接翻书</p>
<p>一个数想变大，肯定是后面开始变大，</p>
<p>很直觉地就抽象成点图</p>
<p>然后看升序降序</p>
<p>下一个排列就是从右往左找到第一个升序的位置，然后从这个位置往右找到第一个比他大的数，然后交换，然后把这个位置往右的数从小到大排序</p>
<p>Ex: 2 3 5 4 1</p>
<pre>
^
|
|   .            
|    .
|  .
| .   .  
|
|-------------------->
</pre>
<p>交换了 3 和 4</p>
<p>然后把 4 之后的数从小到大排序， 翻转即可</p>
<h2 id="code">Code</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">nextPermutation</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt;::size_type k = nums.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (k != <span class="number">0</span> &amp;&amp; nums[k - <span class="number">1</span>] &gt;= nums[k]) &#123;</span><br><span class="line">            k --;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (k == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">reverse</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            vector&lt;<span class="type">int</span>&gt;::size_type t = k;</span><br><span class="line">            <span class="keyword">while</span> (t &lt; nums.<span class="built_in">size</span>() &amp;&amp; nums[t] &gt; nums[k - <span class="number">1</span>]) &#123;</span><br><span class="line">                t ++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">swap</span>(nums[t - <span class="number">1</span>], nums[k - <span class="number">1</span>]);</span><br><span class="line">            <span class="built_in">reverse</span>(nums.<span class="built_in">begin</span>() + k, nums.<span class="built_in">end</span>());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/30/Leetcode/LeetCode-29-Divide-Two-Integers/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/30/Leetcode/LeetCode-29-Divide-Two-Integers/" class="post-title-link" itemprop="url">LeetCode 29. Divide Two Integers</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-10-30 16:41:33 / Modified: 17:13:02" itemprop="dateCreated datePublished" datetime="2022-10-30T16:41:33+08:00">2022-10-30</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="leetcode-29.-divide-two-integers">LeetCode 29. Divide Two Integers</h1>
<p>传送门： <a target="_blank" rel="noopener" href="https://leetcode.com/problems/divide-two-integers/">https://leetcode.com/problems/divide-two-integers/</a></p>
<h2 id="main-idea">Main Idea</h2>
<blockquote>
<p>Given two integers dividend and divisor, divide two integers without using multiplication, division, and mod operator.</p>
</blockquote>
<p>不能用常规的乘除法和取余法</p>
<p>那么本质上乘除法是+-的过程 然后也可以用位运算来实现乘除法</p>
<p>所以思考的时候仍然用乘除的抽象</p>
<p>暴力的话，考虑没有符号的时候（符号可以和数值单独处理）</p>
<p>7 / 2 = 3 也就是 减去k个2，直到不能减为止</p>
<p>不过极端情况下，比如 2^31 / 1 = 2^31，这样的话就会超时</p>
<p>所以需要优化</p>
<p>如果对快速幂的推导比较熟悉的话，应该能很快反应出来可以用二进制的思想log掉k</p>
<p>预处理logk位的2^k，然后从高位开始减去，直到不能减为止</p>
<p>假设 x / y = k ==&gt; (110010)_2 = 2^1 + 2^4 + 2^5</p>
<p>那么就可以这样做：</p>
<p>x - 2^1y - 2^4y - 2^5y</p>
<p>那么就可以先预处理2^0y, 2^1y ... 2^ky, (2^ky &lt;= x &lt; 2^k+1y), 直接处理32位也无所谓了</p>
<p>然后从<strong>高位</strong>开始减去，直到不能减为止</p>
<p>if x &gt;= 2^32y &lt;==&gt; x/y &gt;= 2^32, 那么二进制表示下，32处就是1</p>
<p>符号处理就看两者的符号是否相同</p>
<p>可以用异或来判断</p>
<h2 id="time-complexity">Time Complexity</h2>
<p>时间复杂度：O(logn)</p>
<h2 id="code">Code</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">divide</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"></span><br><span class="line">        <span class="type">bool</span> is_minus = (x &gt; <span class="number">0</span>) ^ (y &gt; <span class="number">0</span>);</span><br><span class="line">        LL a = <span class="built_in">labs</span>(x), b = <span class="built_in">labs</span>(y);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// pre-process logk bits of 2^k</span></span><br><span class="line">        vector&lt;LL&gt; exp;</span><br><span class="line">        <span class="keyword">for</span> (LL i = b; i &lt;= a; i = i + i) &#123;</span><br><span class="line">            exp.<span class="built_in">emplace_back</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        LL res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = exp.<span class="built_in">size</span>() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i --) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a &gt;= exp[i]) &#123;</span><br><span class="line">                a -= exp[i];</span><br><span class="line">                res += <span class="number">1ll</span> &lt;&lt; i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (is_minus) res = -res;</span><br><span class="line">        <span class="keyword">if</span> (res &gt; INT_MAX || res &lt; INT_MIN) res = INT_MAX;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/30/File-In-File-Out/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/30/File-In-File-Out/" class="post-title-link" itemprop="url">File In, File Out</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-10-30 13:43:50 / Modified: 14:15:03" itemprop="dateCreated datePublished" datetime="2022-10-30T13:43:50+08:00">2022-10-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Shell/" itemprop="url" rel="index"><span itemprop="name">Shell</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Shell/Linux-Shell-scripts-cookbook/" itemprop="url" rel="index"><span itemprop="name">Linux Shell scripts cookbook</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="file-in-file-out">File In, File Out</h1>
<h2 id="overview">Overview</h2>
<h2 id="fast-command-line-navigation-using-pushdand-popd">Fast command-line navigation using pushdand popd</h2>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/30/datalab/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/30/datalab/" class="post-title-link" itemprop="url">datalab</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-10-30 13:35:47" itemprop="dateCreated datePublished" datetime="2022-10-30T13:35:47+08:00">2022-10-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-14 00:31:18" itemprop="dateModified" datetime="2022-11-14T00:31:18+08:00">2022-11-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/csapp/" itemprop="url" rel="index"><span itemprop="name">csapp</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/csapp/lab/" itemprop="url" rel="index"><span itemprop="name">lab</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="datalab">datalab</h1>
<h2 id="prerequisites">Prerequisites</h2>
<p><a target="_blank" rel="noopener" href="http://csapp.cs.cmu.edu/3e/labs.html">lab code</a></p>
<p>我使用的ubuntu</p>
<p>第一次执行make会报错，需要装一些库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install gcc-multilib</span><br></pre></td></tr></table></figure>
<h3 id="test">Test</h3>
<p>测试函数 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./btest</span><br></pre></td></tr></table></figure></p>
<p>检查代码规范 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./dlc bits.c</span><br></pre></td></tr></table></figure></p>
<p>这时候再make只有文件本身的errors and warnings</p>
<h2 id="main">Main</h2>
<p>主要文件是<code>datalab-handout/bits.c</code>，里面有一些函数的实现，需要自己实现。</p>
<p>一共需要完成13个函数，每个函数都是一个题目</p>
<h2 id="solutions">Solutions</h2>
<h3 id="bitxor">bitXor</h3>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1</span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * bitXor - x^y using only ~ and &amp; </span></span><br><span class="line"><span class="comment"> *   Example: bitXor(4, 5) = 1</span></span><br><span class="line"><span class="comment"> *   Legal ops: ~ &amp;</span></span><br><span class="line"><span class="comment"> *   Max ops: 14</span></span><br><span class="line"><span class="comment"> *   Rating: 1</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<p>感觉是比较巧妙的题目，尝试在脑中dfs 先列出异或真值表</p>
<table>
<thead>
<tr class="header">
<th>x</th>
<th>y</th>
<th>x^y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>其中为了和&amp;产生联系, 取出结果为1的两行，让0取反 &amp; 1同样得到1</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~x &amp; y, x &amp; ~y</span><br></pre></td></tr></table></figure>
<p>两者取|即可得到结果，|的意思是两种情况满足其一即可</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~x &amp; y | x &amp; ~y</span><br></pre></td></tr></table></figure>
<p>但是本题是不能使用|的, 用De Morgan's Law进行转化即可</p>
<p><img src="/images/csapp-datalab-01.png" alt="csapp-datalab-01.png" style="zoom:70%;" /></p>
<p><img src="/images/csapp-datalab-02.png" alt="csapp-datalab-02.png" style="zoom:70%;" /></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">bitXor</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ~(x &amp; y) &amp; (~(~x &amp; ~y));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="tmin">tmin</h3>
<blockquote>
<p>return minimum two's complement integer</p>
</blockquote>
<p>最高位为1，其余位为0</p>
<p>直接返回0x80000000是违反最大只能使用255的规定的</p>
<blockquote>
<p>Integer constants 0 through 255 (0xFF), inclusive. You are not allowed to use big constants such as 0xffffffff.</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">tmin</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> &lt;&lt; <span class="number">31</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="istmax">isTmax</h3>
<blockquote>
<p>returns 1 if x is the maximum, two's complement number,</p>
</blockquote>
<p>当最高位为0, 其余位为1时，即为最大值</p>
<p>本质就是来判断x的二进制表示是否为期望的二进制表示</p>
<p>等价变化的game</p>
<blockquote>
<p>Legal ops: ! ~ &amp; ^ | +</p>
</blockquote>
<p>不能使用位移。。。</p>
<p>尝试做一些等价变化的dfs</p>
<p>让Tmax + 1, 得到最高位为1, 其余为0的数</p>
<p>两者取反即可判断是否相等了, 对应的操作就是两者按位异或即可: (x + 1) ^ (~x)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">isTmax</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> !((x + <span class="number">1</span>) ^ (~x));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是报错了 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Score	Rating	Errors	Function</span><br><span class="line">ERROR: Test isTmax(-1[0xffffffff]) failed...</span><br><span class="line">...Gives 1[0x1]. Should be 0[0x0]</span><br><span class="line">Total points: 0/1</span><br></pre></td></tr></table></figure></p>
<p>没有考虑到-1的情况</p>
<p><span class="math inline">\(!!\)</span> 这里是一个规格化的操作</p>
<p>因为!会让非0的数的二进制表示为000000, 再!就会变成000001</p>
<p>而0的二进制表示为000000, 再!就会变成000001, 再!就会变成000000</p>
<p>这个书上并没有说，而且也没有看到有人详细讲了这个。。。</p>
<p>补上即可</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">isTmax</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="type">int</span> tmin = x + <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> equal = tmin ^ (~x);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (!!tmin) &amp; (!equal);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第二种解法是利用，自己与自己异或可以得到0的性质 同样需要考虑-1的情况</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">isTmax</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> !(~(x + <span class="number">1</span>) ^ x) &amp; !!(x + <span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<h3 id="alloddbits">allOddBits</h3>
<blockquote>
<p>return 1 if all odd-numbered bits in word set to 1</p>
</blockquote>
<p>所有奇数位为1就返回1, 那么偶数位就可以变化，来构造出对判断有帮助的数</p>
<p>可以设置为全0</p>
<p>缩小规模为4位</p>
<p>&amp;拥有一种遮盖性(mask)，当一个为0就可以把另一个遮盖掉</p>
<p>1010为mask序列, 让1010与num进行&amp;操作，即可得到num的奇数位就可以达到遮蔽偶数位的效果</p>
<p>所以回到之前，让x与mask序列进行&amp;操作，即可得到形如x0x0x0...的序列</p>
<p>异或的其中一个作用就是判不同, 让x0x0x0...与101010...异或，如果为0，说明所有奇数位都为1，否则就不是</p>
<p>那么问题就变成了，如何构造出mask序列</p>
<p>其中一种方法是让题目能够表示的最大的mask序列进行位移和|操作</p>
<p>0xAA = mask_8 = 10101010, 左移8位, 1010101000000000, 两者再|操作, 1010101010101010(mask_16)</p>
<p>mask_16 = 1010101010101010, 左移16位, 10101010101010100000000000000000, 两者再|操作, 10101010101010101010101010101010(mask_32)</p>
<p>构造成功</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">allOddBits</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="type">int</span> mask = <span class="number">0xAA</span>;</span><br><span class="line">    mask = (mask &lt;&lt; <span class="number">8</span>) | mask;</span><br><span class="line">    mask = (mask &lt;&lt; <span class="number">16</span>) | mask;</span><br><span class="line">    <span class="keyword">return</span> !((mask &amp; x) ^ mask);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="negative">negative</h3>
<blockquote>
<p>return -x</p>
</blockquote>
<p>非常常用的一个操作</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">negative</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ~x + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>原因： x与自己取反以后相加是全1，再加1就是全0</p>
<p>也就是 x + ~x + 1 = 0，得出-x = ~x + 1</p>
<h3 id="isasciidigit">isAsciiDigit</h3>
<blockquote>
<p>return 1 if 0x30 &lt;= x &lt;= 0x39 (ASCII codes for characters '0' to '9')</p>
</blockquote>
<p>0x30 = 00110000, 0x39 = 00111001</p>
<p>不等式比大小常用的方法是做差</p>
<p>做差不能直接使用可以用-x = ~x + 1来等价代换</p>
<p>sign_1 = x - 0x30 -&gt; sign_1 = x + ~0x30 + 1 sign_2 = 0x39 - x -&gt; sign_2 = 0x39 + ~x + 1</p>
<p>再根据最高位的符号位来判断正负</p>
<p>!(sign_1 &gt;&gt; 31) &amp; !(sign_2 &gt;&gt; 31)</p>
<h3 id="conditional">conditional</h3>
<blockquote>
<p>same as x ? y : z</p>
</blockquote>
<p>用位运算来实现c中的三目运算符</p>
<p>第一个需要解决的是如何判断x</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x != <span class="number">0</span>, y</span><br><span class="line">x == <span class="number">0</span>, z</span><br></pre></td></tr></table></figure>
<p>判断0可以用!!来替换, if x != 0, !!x == 1, if x == 0, !!x == 0(这在前面其实用到了)</p>
<p>用一个变量来存: condition = !!x</p>
<p>如何需要思考如何返回y或者z， 两者是互斥的</p>
<p>|运算能尽可能得实现互斥(当其中一个为全0的时候)</p>
<p>y | z</p>
<p>所以需要一个因子能在两种不同的情况下让其中一个为0</p>
<p>容易想到的是全0和全1</p>
<p>用condition来构造全0和全1</p>
<p>flag = ~condition + 1, 即可得到全0和全1</p>
<p>flag 和 ~flag 就实现了互斥对</p>
<p>最终得到 flag &amp; y | ~flag &amp; z</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">conditional</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> z)</span> &#123;</span><br><span class="line">    <span class="type">int</span> condition = !!x;</span><br><span class="line">    <span class="type">int</span> flag = ~condition + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> (flag &amp; y) | (~flag &amp; z);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="islessorequal">isLessOrEqual</h3>
<blockquote>
<p>if x &lt;= y then return 1, else return 0</p>
</blockquote>
<p>比大小做差</p>
<p>y - x &gt;= 0 -&gt; y + ~x + 1 &gt;= 0</p>
<p>sign = (y + ~x + 1) &gt;&gt; 31</p>
<p>if (sign &gt;&gt; 31) == 0 y - x &gt;= 0, return 1</p>
<p>if (sign &gt;&gt; 31) == -1 y - x &lt; 0, return 0</p>
<p>return !(sign &gt;&gt; 31)</p>
<p>但是 y - x 可能会溢出</p>
<ol type="1">
<li><p>y &lt; 0, x &gt; 0, y - x &lt; 0, 但是如果溢出就会变成正数，所以需要特殊判断y &lt; 0 &amp;&amp; x &gt; 0</p></li>
<li><p>y &gt; 0, x &lt; 0, y - x &gt; 0, 但是如果溢出就会变成负数，所以需要特殊判断y &gt; 0 &amp;&amp; x &lt; 0</p></li>
<li><p>x &gt; 0 =&gt; s_x = x &gt;&gt; 31, s_x == 0, y &lt; 0 =&gt; s_y = y &gt;&gt; 31, s_y == -1, 可得 of_1 = (!s_x) &amp; s_y</p></li>
</ol>
<p>所以需要满足 !(sign&gt;&gt;31) 但是不满足 of_1, 得到 return (!of_1) &amp; (!(sign&gt;&gt;31))</p>
<ol start="2" type="1">
<li>x &lt; 0 =&gt; s_x = x &gt;&gt; 31, s_x == -1, y &gt; 0 =&gt; s_y = y &gt;&gt; 31, s_y == 0, 可得 of_2 = s_x &amp; (!s_y)</li>
</ol>
<p>这里直接就return 1, 所以只要满足x &lt; 0, y &gt; 0就可以了</p>
<p>return of_2</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> of_2 | (!(of_1)) &amp; (!(sign&gt;&gt;<span class="number">31</span>));</span><br></pre></td></tr></table></figure>
<h3 id="logicalneg">logicalNeg</h3>
<blockquote>
<p>implement the ! operator, using all of the legal operators except !</p>
</blockquote>
<p>也就是实现只有当x == 0的时候，!x才为1</p>
<p>用-x可以得到x的相反数，仍然为0</p>
<p>也就是0很特殊，相反数以后，最高位都是0</p>
<p>(x | negate_x) &gt;&gt; 31 = 0</p>
<p>还需要思考不等于0的情况</p>
<p>如果不等于0， 相反数其中最高位其中一个为1， (x | negate_x) &gt;&gt; 31 = -1</p>
<p>将条件摆在一起 - if x == 0 return 1 (x | negate_x) &gt;&gt; 31 == 0 - if x != 0 return 0 (x | negate_x) &gt;&gt; 31 == -1</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> ((x | ~x + <span class="number">1</span>) &gt;&gt; <span class="number">31</span>) + <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h3 id="howmanybits">howManyBits</h3>
<blockquote>
<p>return the minimum number of bits required to represent x in two's complement</p>
</blockquote>
<p>最直观的方法从找到高位的1， 然后加上一个符号位</p>
<p>查找的问题，概率论加持的最快方法是二分查找</p>
<p>分割区间的性质是是否含有1</p>
<p>没有1就是全0, 判断全0可以用!!</p>
<p>flag = !!(x &gt;&gt; 16), if flag = 1, bit_num &gt; 16, if flag = 0, bit_num &lt; 16</p>
<p>为了能够搜索其中一个区间，我们需要一个位移操作</p>
<p>x = x &gt;&gt; cnt_16</p>
<p>构造cnt_16 = flag &lt;&lt; 4, if falg = 1, cnt_16 = 16, if flag = 0, cnt_16 = 0</p>
<p>接下来8, 4, 2, 1同理</p>
<p>最后求和所有的标记加上符号位即可，但是这样的方法并不能满足负数的情况</p>
<p>看几个例子：</p>
<p>2 bit: -2 ~ 1 3 bit: -4 ~ 3 32 bit: -2147483648(2^31) ~ 2147483647(2^31 - 1)</p>
<p>那么可以把负数转化为正数处理，因为不是对称的，所以进行-1即可</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">howManyBits</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="type">int</span> flag = x &gt;&gt; <span class="number">31</span>;</span><br><span class="line">    <span class="type">int</span> cnt_16, cnt_8, cnt_4, cnt_2, cnt_1, cnt_0;</span><br><span class="line">    <span class="type">int</span> sign = x &gt;&gt; <span class="number">31</span>;</span><br><span class="line">    x = (sign &amp; (~x)) | (~sign &amp; x); <span class="comment">// 根据符号位来判断x的正负，从而决定是否取反(不具有普遍性)</span></span><br><span class="line">    flag = !!(x &gt;&gt; <span class="number">16</span>);</span><br><span class="line">    cnt_16 = flag &lt;&lt; <span class="number">4</span>;</span><br><span class="line">    x = x &gt;&gt; cnt_16;</span><br><span class="line"></span><br><span class="line">    flag = !!(x &gt;&gt; <span class="number">8</span>);</span><br><span class="line">    cnt_8 = flag &lt;&lt; <span class="number">3</span>;</span><br><span class="line">    x = x &gt;&gt; cnt_8;</span><br><span class="line"></span><br><span class="line">    flag = !!(x &gt;&gt; <span class="number">4</span>);</span><br><span class="line">    cnt_4 = flag &lt;&lt; <span class="number">2</span>;</span><br><span class="line">    x = x &gt;&gt; cnt_4;</span><br><span class="line"></span><br><span class="line">    flag = !!(x &gt;&gt; <span class="number">2</span>);</span><br><span class="line">    cnt_2 = flag &lt;&lt; <span class="number">1</span>;</span><br><span class="line">    x = x &gt;&gt; cnt_2;</span><br><span class="line"></span><br><span class="line">    flag = !!(x &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    cnt_1 = flag;</span><br><span class="line">    x = x &gt;&gt; cnt_1;</span><br><span class="line"></span><br><span class="line">    cnt_0 = x;</span><br><span class="line">    <span class="keyword">return</span> cnt_16 + cnt_8 + cnt_4 + cnt_2 + cnt_1 + cnt_0 + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr />
<p>接下來是float的主场了</p>
<p>float限制非常少</p>
<blockquote>
<p>For the problems that require you to implement floating-point operations, the coding rules are less strict. You are allowed to use looping and conditional control. You are allowed to use both ints and unsigneds. You can use arbitrary integer and unsigned constants. You can use any arithmetic, logical, or comparison operations on int or unsigned data.</p>
</blockquote>
<hr />
<h3 id="floatscale2">floatScale2</h3>
<blockquote>
<p>Return bit-level equivalent of expression 2*f for floating point arguments f.</p>
</blockquote>
<p>这里操作是做浮点数，但是传入和传出都是<code>unsigned int</code></p>
<p><code>unsigned int</code> ?-&gt; <code>float</code></p>
<p>两者都是32位的，所以要分别获取 <code>unsigned int</code> 1位的<code>s</code>, 8位的<code>exp</code>, 23位的<code>frac</code></p>
<p>最高位好获得，直接uf &amp; 0x80000000</p>
<p>exp = (0x7F800000 &amp; uf) &gt;&gt; 23, frac = uf &amp; 0x7FFFFF</p>
<p>接下里处理浮点数，浮点数有四种规则，需要根据<code>exp</code>进行分类讨论</p>
<ul>
<li>if (exp == 0xFF) &amp;&amp; (frac != 0) =&gt; NaN</li>
</ul>
<p>按照规则返回 uf.</p>
<ul>
<li>if (exp == 0xFF) &amp;&amp; (frac == 0)</li>
</ul>
<p>按照规则返回 uf.</p>
<ul>
<li><p>if (exp == 0) &amp;&amp; (frac == 0) return uf</p></li>
<li><p>if (exp == 0) &amp;&amp; (frac != 0) For frac * 2, frac &lt;&lt; 1 return s | (exp &lt;&lt; 23) | (frac &lt;&lt; 1)</p></li>
<li><p>if (exp != 0) &amp;&amp; (exp != 255), return s | ((exp + 1) &lt;&lt; 23) | frac</p></li>
</ul>
<p>这里因为要乘2所以让exp + 1, 但是这样会偏移导致当exp位254的时候产生exp+1=255, 表示为无穷</p>
<p>return s | (0xFF &lt;&lt; 23)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">unsigned</span> <span class="title function_">floatScale2</span><span class="params">(<span class="type">unsigned</span> uf)</span> &#123;</span><br><span class="line">    <span class="type">unsigned</span> s = uf &amp; <span class="number">0x80000000</span>;</span><br><span class="line">    <span class="type">unsigned</span> <span class="built_in">exp</span> = (uf &amp; <span class="number">0x7F800000</span>) &gt;&gt; <span class="number">23</span>;</span><br><span class="line">    <span class="type">unsigned</span> frac = uf &amp; <span class="number">0x007FFFFF</span>;</span><br><span class="line">    <span class="type">unsigned</span> ret = <span class="number">0</span>;</span><br><span class="line">    <span class="type">unsigned</span> inf = s | (<span class="number">0xFF</span> &lt;&lt; <span class="number">23</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">exp</span> == <span class="number">0xFF</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> uf;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">exp</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (frac == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> uf;</span><br><span class="line">        &#125;</span><br><span class="line">        frac = frac &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        ret = s | (<span class="built_in">exp</span> &lt;&lt; <span class="number">23</span>) | frac;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">exp</span> = <span class="built_in">exp</span> + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">exp</span> == <span class="number">0xFF</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> inf;</span><br><span class="line">    &#125;</span><br><span class="line">    ret = s | (<span class="built_in">exp</span> &lt;&lt; <span class="number">23</span>) | frac;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="floatfloat2int">floatFloat2Int</h3>
<p>把一个单精度浮点数强制转化成整形数</p>
<p>由于单精度浮点数的范围比int大得多, 且int的范围是-2^31 ~ 2^31 - 1, 所以需要进行分类讨论</p>
<p>if E &lt; 0, 此时浮点数本身表示的并不是整数, return 0;</p>
<p>V = (-1)^s * M * 2^E</p>
<ul>
<li>E = 31, s = 1, V = -2^31</li>
<li>E = 31, s = 0, V = 2^31 - 1</li>
</ul>
<p>可得到 if E &gt; 31 return 0x80000000</p>
<p>已经处理好了</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  -----            --------</span><br><span class="line">      |            |</span><br><span class="line">-----------------------------&gt;</span><br><span class="line">      <span class="number">0</span>            <span class="number">31</span></span><br></pre></td></tr></table></figure>
<p>现在处理E: 0～31</p>
<ul>
<li>s = uf &gt;&gt; 31</li>
<li>exp = (uf &amp; 0x7F800000) &gt;&gt; 23</li>
</ul>
<p>0 &lt;= E &lt;= 31 =&gt; 127 &lt;= exp &lt;= 158(E = exp - bias(127))</p>
<p>根据exp的范围可以得到是规格化的数, M = 1 + f</p>
<ul>
<li>frac(M) = (uf &amp; 0x7FFFFF) | 0x00800000 （这里比较巧妙）</li>
</ul>
<p>这里E可以理解为等一下要右移的位数等价于移动小数点，因为要转int,所以会截断</p>
<p>if 0 &lt;= E &lt;= 23, 需要截断, 直接右移23 - E位 &lt;=&gt; return frac &gt;&gt; (23 - E)</p>
<p>if 24 &lt;= E &lt;= 31, 不需要截断, 直接左移E - 23位 &lt;=&gt; return frac &lt;&lt; (E - 23)</p>
<p>最后确定一下符号位就好了</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">floatFloat2Int</span><span class="params">(<span class="type">unsigned</span> uf)</span> &#123;</span><br><span class="line">    <span class="type">int</span> sign = uf &gt;&gt; <span class="number">31</span>;</span><br><span class="line">    <span class="type">int</span> <span class="built_in">exp</span> = (uf &amp; <span class="number">0x7F800000</span>) &gt;&gt; <span class="number">23</span>;</span><br><span class="line">    <span class="type">int</span> frac = (uf &amp; <span class="number">0x007FFFFF</span>);</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> E = <span class="built_in">exp</span> - <span class="number">127</span>;</span><br><span class="line">    frac = frac | <span class="number">0x00800000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (E &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (E &gt; <span class="number">31</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0x80000000</span>u;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (E &gt; <span class="number">23</span>) &#123;</span><br><span class="line">        res = frac &lt;&lt; (E - <span class="number">23</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res = frac &gt;&gt; (<span class="number">23</span> - E);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (sign == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> ~res + <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="floatpower2">floatPower2</h3>
<blockquote>
<p>Return bit-level equivalent of the expression 2.0^x (2.0 raised to the power x) for any 32-bit integer x.</p>
</blockquote>
<blockquote>
<p>If the result is too small to be represented as a denorm, return If too large, return +INF.</p>
</blockquote>
<p>这里给了如果太大或者太小的返回值</p>
<p>来分析一下当x取什么值会导致y太大或者太小</p>
<p>在float那里，非规格化的数有两个用途，一个是表示0, 一个是表示非常接近0的数</p>
<p>当exp = 0000 0000, f = 000...01, 此时就是float最接近0的数字</p>
<p>代入 V = (-1)^s * M * 2^E, 可以得到V_min = 2^-149(E = 1 - bias = -126, M = f = 2^(23))</p>
<p>也就是当x &lt; -149的时候，y &lt; 2^-149, 此时y太小了, return 0</p>
<p>当exp = 1111 1111(此时是规格化的), f = 000...00， E = exp - bias = 127, M = 1 + f = 2^(23), 此时V_max = 2^127</p>
<p>也就是当x &gt; 127的时候，y &gt; 2^127, 此时y太大了, return +INF(由0xFF &lt;&lt; 23得到)</p>
<p>此时只剩下中间的区间了</p>
<p>其中，有些值很靠近0, 需要用非规格化的数来表示，其余的用规格化的数来表示</p>
<p>需要得到分界点t</p>
<p>这里感觉考察的是非规格和规格之间平滑过度的点</p>
<p>规格化最小值：当exp = 1, E = exp - bias = -126, V_min = 2^-126</p>
<p>非规格化最大值：当exp = 0, E = exp - bias = -127, V_max = 2^-149</p>
<p>让t为127</p>
<p>Normalized: -149 &lt;= x &lt;= -127, Denormalized: -126 &lt;= x &lt;= 127</p>
<p>此时来构造非规格化的数</p>
<p>exp = 0000 0000, frac = 0x1 &lt;&lt; (x + 149)</p>
<p>来构造规格化的数</p>
<p>if x == -126, E = -126, E = exp - 127, exp = 1 if x == -125, E = -125, E = exp - 127, exp = 2 ... if x == 127, E = 127, E = exp - 127, exp = 254</p>
<p>-126 &lt;= x &lt;= 127, exp = x + 127, return exp &lt;&lt; 23</p>
<p>```c unsigned floatPower2(int x) { int exp; unsigned res;</p>
<pre><code>if (x &lt; -149) &#123;
    return 0;
&#125;

if (x &gt; 127) &#123;
    return (0xFF &lt;&lt; 23);
&#125;

if (x &lt; -126) &#123;
    return 0x1 &lt;&lt; (x + 149);
&#125;

exp = x + 127;
res = exp &lt;&lt; 23;
return res;</code></pre>
<p>}```</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/29/Linux/CLI/zsh/Understanding-Zsh-Completions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="krmmzs">
      <meta itemprop="description" content="233">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="krmmzs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/29/Linux/CLI/zsh/Understanding-Zsh-Completions/" class="post-title-link" itemprop="url">Understanding Zsh Completions</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-10-29 16:58:03" itemprop="dateCreated datePublished" datetime="2022-10-29T16:58:03+08:00">2022-10-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-10-31 13:57:16" itemprop="dateModified" datetime="2022-10-31T13:57:16+08:00">2022-10-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/CLI/" itemprop="url" rel="index"><span itemprop="name">CLI</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/CLI/zsh/" itemprop="url" rel="index"><span itemprop="name">zsh</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="understanding-zsh-completions">Understanding Zsh Completions</h1>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">krmmzs</p>
  <div class="site-description" itemprop="description">233</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">69</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">40</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/krmmzs" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;krmmzs" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:belliyan250@gmail.com" title="E-Mail → mailto:belliyan250@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.youtube.com/channel/UCh2c-Y0OmoDUfeZHomm_Llg" title="YouTube → https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCh2c-Y0OmoDUfeZHomm_Llg" rel="noopener" target="_blank"><i class="fab fa-youtube fa-fw"></i>YouTube</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://t.me/krmmzs" title="Telegram → https:&#x2F;&#x2F;t.me&#x2F;krmmzs" rel="noopener" target="_blank"><i class="fab fa-telegram fa-fw"></i>Telegram</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">krmmzs</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  

</body>
</html>
